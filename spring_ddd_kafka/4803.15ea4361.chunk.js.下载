(self.webpackChunklite=self.webpackChunklite||[]).push([[4803],{13779:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.createElement("path",{d:"M10.3 18H4.4l.1-.9.8-.12c.55-.11.78-.23.78-.45V5.37c0-.22-.11-.34-.9-.45H4.5l-.11-.9h6.25c4.02 0 5.58 1.24 5.58 3.14 0 1.9-1.78 3.12-3.79 3.46v.11c2.7.34 4.25 1.56 4.25 3.57 0 2.35-2 3.7-6.37 3.7h.02-.02zM9.98 5.02h-1v5.47h1.23c1.79 0 2.79-1.23 2.79-2.68 0-1.69-1-2.8-3-2.8v.01zm-.22 6.36h-.78V17l1.22.22h.22c1.67 0 3.01-1 3.01-2.8 0-2.11-1.56-3-3.69-3h.02z",fillRule:"evenodd"});const s=function(e){return r.createElement("svg",o({width:21,height:21},e),i)}},63671:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.createElement("path",{d:"M9.85 18.04c-.54 0-2.03-.64-1.92-.85L9.95 9.5l-.64-.22-1.38 1.5-.43-.43c.53-1.17 1.7-2.67 2.77-2.67.54 0 2.24.54 2.14.86l-2.14 7.78.54.22 1.6-1.07.42.43c-.64 1.06-1.92 2.13-2.98 2.13zm2.34-11.73c-.96 0-1.38-.64-1.38-1.39 0-1.07.74-1.92 1.49-1.92.85 0 1.39.64 1.39 1.5-.11 1.06-.75 1.8-1.5 1.8z",fillRule:"evenodd"});const s=function(e){return r.createElement("svg",o({width:21,height:21},e),i)}},25343:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.createElement("path",{d:"M2.2 13.17c0-.57.13-1.11.38-1.6l.02-.02v-.02l.02-.02c0-.02 0-.02.02-.02.12-.26.3-.52.57-.8l3.2-3.19v-.02l.01-.02c.44-.41.91-.7 1.44-.85a4.87 4.87 0 0 0-1.19 2.36 5.04 5.04 0 0 0-.04 1.14L4.67 12.1c-.19.19-.32.4-.38.65a1.33 1.33 0 0 0-.05.42 2 2 0 0 0 .06.47c.07.21.2.4.37.58l1.29 1.31c.27.28.62.42 1.03.42.42 0 .78-.14 1.06-.42l1.23-1.25.79-.78 1.15-1.16c.08-.09.19-.22.28-.4.1-.2.15-.42.15-.67 0-.16-.02-.3-.06-.45l-.02-.02v-.02l-.07-.14-.04-.06-.06-.13-.02-.02c0-.02 0-.03-.02-.05a.6.6 0 0 0-.14-.16l-.48-.5c0-.04.01-.1.04-.15l.06-.12 1.17-1.14.09-.09.56.57c.02.04.08.1.16.18l.05.04.03.06.04.05.03.05c.03.02.04.04.04.05l.1.14.02.02c0 .02.01.03.03.04l.1.2v.02c.1.16.2.38.3.68a1 1 0 0 1 .04.25 3.2 3.2 0 0 1 .02 1.33 3.49 3.49 0 0 1-.95 1.87l-.66.67-.97.97-1.56 1.57c-.67.67-1.5 1.02-2.47 1.02s-1.8-.34-2.49-1.03l-1.3-1.3a3.54 3.54 0 0 1-.9-1.63 4.54 4.54 0 0 1-.1-.88v-.01H2.2zm5.38-3.43c0-.19.03-.4.07-.63.13-.74.45-1.37.96-1.87l.66-.67.97-.98 1.56-1.56C12.48 3.34 13.3 3 14.27 3c.97 0 1.8.34 2.48 1.02l1.3 1.32a3.48 3.48 0 0 1 1 2.48c0 .58-.12 1.11-.37 1.6l-.02.02v.02l-.02.04c-.14.27-.35.54-.6.8l-3.18 3.2-.01.02-.01.02c-.44.42-.92.7-1.43.83a4.55 4.55 0 0 0 1.23-3.52l1.99-1.97c.18-.21.3-.42.35-.65a2.03 2.03 0 0 0-.01-.9 1.96 1.96 0 0 0-.36-.58l-1.3-1.3a1.49 1.49 0 0 0-1.06-.42c-.42 0-.77.14-1.06.4L11.98 6.7l-.79.8-1.16 1.15c-.08.08-.18.21-.3.4-.08.24-.13.46-.13.67 0 .16.02.31.06.46l.02.02v.02l.06.14s0 .03.05.06l.06.13.02.02v.02s.02 0 .02.02c.05.08.1.13.14.16l.47.5c0 .04-.02.09-.04.15l-.06.12-1.15 1.15-.1.08-.56-.56a2.31 2.31 0 0 0-.18-.19c-.02-.01-.02-.03-.02-.04l-.02-.02a.38.38 0 0 1-.1-.12c-.03-.03-.05-.04-.05-.06l-.1-.15-.02-.02-.02-.04L8 11.4v-.02a5.1 5.1 0 0 1-.28-.69 1.03 1.03 0 0 1-.04-.26 2.62 2.62 0 0 1-.1-.7v.01z",fillRule:"evenodd"});const s=function(e){return r.createElement("svg",o({width:21,height:21},e),i)}},59116:(e,t,n)=>{"use strict";n.d(t,{Te:()=>r,_M:()=>o,ed:()=>i});var r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){return 2===e.type&&1===e.path.length}))},o=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},i=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},26600:(e,t,n)=>{"use strict";n.d(t,{qk:()=>u,zg:()=>f,c8:()=>m});var r=n(63038),o=n.n(r),i=n(34575),s=n.n(i),a=n(93913),l=n.n(a),c=n(67294),u=function(){function e(t,n){s()(this,e),this.selection=void 0,this.rect=void 0,this.selection=t,this.rect=n}return l()(e,[{key:"getSelection",value:function(){return this.selection?this.selection.current?this.selection.current:this.selection:null}},{key:"getRect",value:function(){return this.rect}}]),e}(),p=[{children:[{text:""}]}],d=c.createContext({}),f=function(e){var t=e.children,n=e.initialValue,r=c.useState(null),i=o()(r,2),s=i[0],a=i[1],l=c.useState(null),u=o()(l,2),f=u[0],m=u[1],v=c.useState(n||p),h=o()(v,2),g=h[0],b=h[1];return c.createElement(d.Provider,{value:{mode:f,setMode:m,backgroundSelection:s,setBackgroundSelection:a,value:g,setValue:b,clearValue:function(){b(p)}}},t)},m=function(){return c.useContext(d)}},25772:(e,t,n)=>{"use strict";n.d(t,{O:()=>l});var r=n(18156),o=n(67294),i=n(84792),s=n(10143),a=n(54803),l=function(e){var t=e.renderElement,n=e.renderLeaf,l=e.onFocus,c=e.onBlur,u=e.onClick,p=e.onKeyDown,d=void 0===p?function(){}:p,f=e.decorate,m=e.editor,v=e.placeholder,h=void 0===v?"Share your thoughts...":v,g=o.useCallback((function(e){m&&""===i.Node.string(m)&&(0,r.default)("backspace",e)&&(0,a.oe)(m),d(e)}),[m,d]);return o.createElement(s.CX,{renderElement:t,renderLeaf:n,placeholder:h,onFocus:l,onBlur:c,onClick:u,onKeyDown:g,decorate:f})}},78067:(e,t,n)=>{"use strict";var r;n.d(t,{r:()=>r}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(r||(r={}))},22470:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(67294),o=n(10143),i=n(26600),s=function(e){var t=e.children,n=e.editor,s=(0,i.c8)(),a=s.setValue,l=s.value;return l&&a?r.createElement(o.mH,{editor:n,value:l,onChange:a},t):null}},54803:(e,t,n)=>{"use strict";n.d(t,{AR:()=>r,wB:()=>y,T8:()=>R,Nx:()=>P,uT:()=>S,t$:()=>O,w9:()=>w,St:()=>T,th:()=>D,Cr:()=>C,oe:()=>k,J1:()=>N,qW:()=>M});var r,o=n(59713),i=n.n(o),s=n(63038),a=n.n(s),l=n(42348),c=n.n(l),u=n(84792),p=n(6615),d=n(14391);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.Link=0]="Link"}(r||(r={}));var v=["numbered-list","bulleted-list","bq"],h=[d.Jh.A,d.Jh.STRONG,d.Jh.EM];function g(e){if(!e.children)return[];if(e.children.every((function(e){return function(e){return u.Text.isText(e)||"link"===e.type}(e)}))){var t=u.Node.string(e),n=!(null!=e&&e.name),r=n?x():e.name,o=function(e){switch(e){case"oli":return 10;case"uli":return 9;case"bq-line":return 6;case"image":return 4;case"title":return 3;default:return 1}}(e.type);if("image"===e.type)return[{type:n?1:3,paragraph:{name:r,type:o,text:t,markups:[],layout:1,metadata:{id:e.imageProps.miroId,originalWidth:e.imageProps.width,originalHeight:e.imageProps.height}},verifySameName:!n}];if(!t.length&&!e.name)return[];if(!t.length&&e.name)return[{type:2,paragraph:{name:e.name}}];var i=e.children.reduce((function(e,t){var n=a()(e,2),r=n[0],o=n[1],i=u.Node.string(t).length;return t.italic&&o.push({type:2,start:r,end:r+i}),t.bold&&o.push({type:1,start:r,end:r+i}),"link"===t.type&&o.push({type:3,start:r,end:r+i,href:t.url,title:"",rel:"",anchorType:0}),[r+i,o]}),[0,[]]);return[{type:n?1:3,paragraph:{markups:a()(i,2)[1],name:r,text:t,type:o},verifySameName:!n}]}return c()(e.children.map(g).filter((function(e){return e.length})))}function b(e,t){return e.map((function(e,n){return e.index=n+t,e}))}var E=function(e){var t=[];return e.map((function(e){return t.includes(e.name)?m(m({},e),{},{name:void 0}):(e.name&&t.push(e.name),e)}))};function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[];if(n){var o=x();r=[{type:8,index:0,section:{name:o,startIndex:0}}]}var i=e.children,s=E(i);e.children=s;var a=0;if(s[0]&&!s[0].name&&"title"!==s[0].type){var l=x();r.push({type:1,index:0,paragraph:{name:l,type:3,text:"",markups:[]}}),a=1}var c=g(e),u=b(c,a);return r.concat(u)}function x(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")}var R=function(e,t){e.selection&&S(e,t)},P=function(e,t){var n=t||e.selection;u.Transforms.unwrapNodes(e,{match:function(e){return"link"===e.type},at:n})},S=function(e,t){(function(e){var t=u.Editor.nodes(e,{match:function(e){return"link"===e.type}});return!!a()(t,1)[0]})(e)&&P(e);var n=e.selection,r=n&&u.Range.isCollapsed(n),o={type:"link",url:t,children:r?[{text:t}]:[]};r?u.Transforms.insertNodes(e,o):(u.Transforms.wrapNodes(e,o,{split:!0}),u.Transforms.collapse(e,{edge:"end"}))},O=function(e,t,n){var r=n||e.selection,o=r&&u.Range.isCollapsed(r),i=u.Editor.marks(e)||{};if(o)return i[t];var s=u.Editor.nodes(e,{match:function(e){return!0===e[t]||e.type===t},at:r,mode:"all",universal:!0});return!!a()(s,1)[0]},w=function(e,t){O(e,t)?u.Editor.removeMark(e,t):u.Editor.addMark(e,t,!0)},I=function(e){switch(e){case"bq":return"bq-line";case"numbered-list":return"oli";case"bulleted-list":default:return"uli"}},T=function(){if("undefined"!=typeof window){var e=window.getSelection(),t=e&&!e.isCollapsed&&e.getRangeAt(0);return t&&t.getBoundingClientRect()}},D=function(e,t,n){var r=n||e.selection,o=O(e,t,n),i=v.includes(t),s=u.Range.isRange(r)?u.Editor.rangeRef(e,r):u.Point.isPoint(r)?u.Editor.pointRef(e,r):u.Editor.pathRef(e,r);if(u.Transforms.unwrapNodes(e,{at:r,match:function(e){return v.includes(e.type)},split:!0}),s.current&&(u.Transforms.setNodes(e,{type:o?"paragraph":i?I(t):t},{at:s.current}),!o&&i)){var a={type:t,children:[]};u.Transforms.wrapNodes(e,a,{at:s.current})}},C=function(e,t){["bold","italic"].forEach((function(n){O(e,n,t)&&u.Transforms.unsetNodes(e,n,{at:t})})),["link","numbered-list","bulleted-list","bq"].forEach((function(n){O(e,n,t)&&u.Transforms.unwrapNodes(e,{at:t,match:function(e){return e.type===n}})}))},k=function(e){if(e){var t=function(e){if(!e||!e.children.length)return!1;var t=u.Editor.point(e,[0],{edge:"start"}),n=e.children.length;return{anchor:t,focus:u.Editor.point(e,[n-1],{edge:"end"})}}(e);t&&(u.Transforms.removeNodes(e,{at:t}),u.Transforms.insertNodes(e,{children:[{text:""}]}))}},j=function(e){return"link"===e.type},N=function(e){return e.paragraphs.map((function(e){var t=e.markups,n=e.name,r=e.text;if(e.type===d.NJ.H3)return{children:[{text:r}],name:n,type:"title"};if(null==t||!t.length)return{children:[{text:r}],name:n};var o=new Set;o.add(0),o.add(r.length),t.forEach((function(e){var t=e.start,n=e.end;o.add(t),o.add(n)}));var i=Array.from(o);return{children:i.sort((function(e,t){return e-t})).slice(1).map((function(e,n,o){var s=n?o[n-1]:i[0],a=e,l=t.filter((function(e){return e.start<=s&&a<=e.end})),c={text:r.substring(s,a)};return l.forEach((function(e){var t=e.href;switch(e.type){case d.Jh.STRONG:(j(c)?c.children[0]:c).bold=!0;break;case d.Jh.EM:(j(c)?c.children[0]:c).italic=!0;break;case d.Jh.A:c={type:"link",url:t,children:[c]}}})),c})),name:n}}))},M=function(e){switch(e.inResponseToType){case p.Fz.STORY:case p.Fz.LEGACY:return e.content.bodyModel.paragraphs.every((function(e){return e.type===d.NJ.P&&e.markups.every((function(e){return e.type&&h.includes(e.type)}))}));default:return!0}}},5399:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var r=n(28655),o=n.n(r);function i(){var e=o()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return i=function(){return e},e}var s=(0,n(71439).Ps)(i())},9735:(e,t,n)=>{"use strict";n.d(t,{w1:()=>oe,rL:()=>X,D5:()=>$,Vz:()=>Q,Fm:()=>Z,lw:()=>G,Uk:()=>te,u$:()=>Y,cv:()=>J,c:()=>W});var r=n(6479),o=n.n(r),i=n(63038),s=n.n(i),a=n(67154),l=n.n(a),c=n(68337),u=n.n(c),p=n(67294),d=n(84792),f=n(86817),m=n(10143),v=n(61889),h=n(85432),g=n(28309),b=n(14391),E=n(8667),y=function(e){var t=(0,m.vt)(),n=(0,m.UE)(),r=(0,m.ui)(),o=(0,g.Iq)(),i=e.ParagraphWrapper;switch(e.element.type){case"link":return p.createElement("span",e.attributes,p.createElement(h.rU,{linkStyle:"OBVIOUS",cursor:"text",inline:!0,href:e.element.url},e.children));case"numbered-list":return p.createElement("ol",e.attributes,e.children);case"bulleted-list":return p.createElement("ul",e.attributes,e.children);case"bq":return p.createElement("div",e.attributes,p.createElement(i,l()({},e,{editor:r}),e.children));case"image":var s=(0,E.jg)({layout:b.ms.FULL_WIDTH,originalWidth:e.element.imageProps.width,originalHeight:e.element.imageProps.height}),a=s.width,c=s.strategy,u=s.otherWidths;return p.createElement("div",l()({},e.attributes,{className:o({margin:"20px 0 10px"})}),p.createElement("div",{contentEditable:!1,className:o({boxShadow:"".concat(t&&n?"0 0 0 3px #03a87c":"none")})},p.createElement(v.F,{maxWidth:"100%",miroId:e.element.imageProps.miroId,width:a,strategy:c,otherWidths:u})),e.children);default:return p.createElement("div",e.attributes,p.createElement(i,l()({},e,{editor:r}),e.children))}},x=n(59713),R=n.n(x);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=p.createElement("path",{d:"M20 12h-7V5h-1v7H5v1h7v7h1v-7h7",fillRule:"evenodd"});const O=function(e){return p.createElement("svg",P({className:"adder-25px_svg__svgIcon-use",width:25,height:25},e),S)};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var I=p.createElement("g",{fillRule:"evenodd"},p.createElement("path",{d:"M4.04 17.05v-8.2c0-1.08.84-1.84 1.94-1.84h2.45c.44-.75.81-2.01 1.17-2L15.4 5c.3 0 .76 1.32 1.18 2 0 .08 2.5 0 2.5 0 1.09 0 1.96.76 1.96 1.85v8.2c0 1.08-.87 1.94-1.97 1.94H5.97a1.9 1.9 0 0 1-1.93-1.94zM6.21 8a1.2 1.2 0 0 0-1.17 1.18v7.68c0 .63.55 1.15 1.17 1.15H18.9c.62 0 1.14-.53 1.14-1.15V9.17c0-.62-.52-1.17-1.14-1.17h-3.03c-.24-.63-.73-1.92-.87-2h-5c-.21.1-.87 2-.87 2H6.21z"}),p.createElement("path",{d:"M12.48 15.98A3.47 3.47 0 0 1 9 12.48 3.47 3.47 0 0 1 12.48 9a3.47 3.47 0 0 1 3.5 3.49 3.47 3.47 0 0 1-3.5 3.49zm0-6.08a2.62 2.62 0 0 0-2.59 2.59c0 1.4 1.19 2.59 2.6 2.59 1.4 0 2.58-1.19 2.58-2.6 0-1.4-1.18-2.58-2.59-2.58z"}));const T=function(e){return p.createElement("svg",w({className:"camera-25px_svg__svgIcon-use",width:25,height:25},e),I)};function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=p.createElement("g",{fillRule:"evenodd"},p.createElement("path",{d:"M8.45 12H5.3c-.25 0-.45.22-.45.5 0 .27.2.5.45.5h5.4c.25 0 .45-.23.45-.5 0-.28-.2-.5-.45-.5H8.45zM17.45 12H14.3c-.25 0-.45.22-.45.5 0 .27.2.5.45.5h5.4c.25 0 .45-.23.45-.5 0-.28-.2-.5-.45-.5h-2.25z"}));const k=function(e){return p.createElement("svg",D({className:"section-25px_svg__svgIcon-use",width:25,height:25},e),C)};var j=n(79208);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){var e=(0,g.Iq)(),t=(0,m.ui)(),n=p.useState(!1),r=s()(n,2),o=r[0],i=r[1],a=p.useCallback((function(){i(!o)}),[o]),l={borderRadius:"100%",border:"1px solid rgba(0,0,0,.68)",height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},c=(0,j.JA)((function(e,n){var r=n.height,o=n.width;X(t,{miroId:e.value.fileId,width:o,height:r})}),(function(){})),u=c.inputRef,d=c.fireClick,f=p.useCallback((function(){a(),d()}),[d]);return p.createElement("div",{className:e({position:"relative",top:"-3px"})},p.createElement("div",{className:e({position:"absolute",left:"-55px",display:"flex",backgroundColor:o?"white":"transparent",transition:"background-color 0.25s, padding 0.25s",zIndex:"10",padding:o?"5px 200px 5px 5px":"5px"})},p.createElement("div",{className:e(M(M({},l),{},{transform:o?"rotate(45deg)":"",transition:"transform 0.25s"})),onClick:a},p.createElement(O,null)),p.createElement("div",{className:e(M(M({},l),{},{marginLeft:o?"32px":"0px",transform:o?"scale(1.0)":"scale(0)",transition:"transform 0.25s, margin-left 0.25s"})),onClick:f},p.createElement(T,null)),p.createElement("div",{className:e(M(M({},l),{},{marginLeft:o?"10px":"0px",transform:o?"scale(1.0)":"scale(0)",transition:"transform 0.25s, margin-left 0.25s"}))},p.createElement(k,null))),p.createElement("input",{type:"file",ref:u,className:e({display:"none"})}))},L=n(54803),A=n(95064),B=n(19692),U=n(69703),H=n(65441);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=u()(),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.useMemo((function(){var t=K((0,f.VC)((0,m.BU)((0,d.createEditor)())));return e.reduce((function(e,t){return t(e)}),t)}),[]),r=p.useCallback((function(e){return p.createElement(z,e)}),[]),o=t.ParagraphWrapper||re,i=function(e){return p.createElement(y,l()({},e,{ParagraphWrapper:o}))};return{editor:n,renderLeaf:r,renderElement:i}},z=function(e){var t=e.attributes,n=e.children,r=e.leaf;return r.bold&&(n=p.createElement("strong",null,n)),r.italic&&(n=p.createElement("em",null,n)),p.createElement("span",t,n)},q=function(e){var t=V.match(e)||[],n=s()(t,1)[0];return!!n&&n.raw===e},$=function(e){var t=V.match(e)||[],n=s()(t,1)[0];return n&&n.raw===e?n.url:null},K=function(e){var t=e.isInline,n=e.isVoid;return e.isVoid=function(e){return n(e)},e.isInline=function(e){return"link"===e.type||t(e)},e},W=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var r=s()(n,2),o=r[0],i=r[1];"title"===o.type&&0!==i[0]&&(0,L.th)(e,"title",i),"title"===o.type&&o.children.forEach((function(t,n){var r=i.concat(n);(0,L.Cr)(e,r)})),t([o,i])},e},G=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var r=s()(n,2),o=r[0],i=r[1],a=!o.type||"paragraph"===o.type,l=o.children&&1===o.children.length&&d.Text.isText(o.children[0])&&("- "===d.Node.string(o)||"* "===d.Node.string(o));a&&l&&d.Editor.withoutNormalizing(e,(function(){d.Transforms.insertFragment(e,[{text:""}],{at:i}),d.Transforms.delete(e,{at:i.concat(1)}),(0,L.th)(e,"bulleted-list",i)}));var c=o.children&&1===o.children.length&&d.Text.isText(o.children[0])&&"1. "===d.Node.string(o);a&&c&&d.Editor.withoutNormalizing(e,(function(){d.Transforms.insertFragment(e,[{text:""}],{at:i}),d.Transforms.delete(e,{at:i.concat(1)}),(0,L.th)(e,"numbered-list",i)})),t([o,i])},e},J=function(e){var t=e.normalizeNode;return e.normalizeNode=function(n){var r=s()(n,2),o=r[0],i=r[1];if("bulleted-list"===o.type||"numbered-list"===o.type||"bq"===o.type){var a=o.children.length;if(a>1&&o.children.slice(-2,-1).every((function(e){return""===d.Node.string(e)}))){var l=a-2;d.Transforms.removeNodes(e,{at:i.concat(l)}),d.Transforms.setNodes(e,{type:"paragraph"},{at:i.concat(l)}),d.Transforms.liftNodes(e,{at:i.concat(l)})}}t([o,i])},e},Z=function(e){var t=e.insertData,n=e.insertText;return e.insertText=function(t){t&&q(t)?(0,L.uT)(e,t):n(t)},e.insertData=function(n){var r=n.getData("text/plain");r&&q(r)?(0,L.uT)(e,r):t(n)},e},Y=function(e){var t=e.insertData,n=e.insertBreak,r=e.isVoid;return e.isVoid=function(e){return"image"===e.type||r(e)},e.insertBreak=function(){var t=d.Editor.parent(e,e.selection),r=s()(t,2),o=r[0],i=r[1];if(d.Editor.after(e,e.selection)||"image"!==o.type)n();else{var a=d.Path.next(i);d.Transforms.insertNodes(e,{children:[{text:""}]},{at:a,voids:!0}),d.Transforms.select(e,a)}},e.insertData=function(e){var n=e.getData("text/plain"),r=e.files;if(r&&r.length>0){var o,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(r);try{for(i.s();!(o=i.n()).done;){var a=o.value,l=new FileReader,c=a.type.split("/");"image"===s()(c,1)[0]&&(l.addEventListener("load",(function(){})),l.readAsBinaryString(a))}}catch(e){i.e(e)}finally{i.f()}}else(function(e){if(!e)return!1;if(!q(e))return!1;var t=new URL(e).pathname.split(".").pop();return!!t&&["jpg","JPG","png","PNG","jpeg","JPEG"].includes(t)})(n)||t(e)},e},X=function(e,t){var n={type:"image",imageProps:t,children:[{text:""}]};d.Transforms.insertNodes(e,n)};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.selection,r=n.anchor,o=d.Editor.before(e,r,{distance:t});if(!o)return"";var i={anchor:o,focus:n.anchor};return d.Editor.string(e,i)}var te=function(e){var t=e.insertText;return e.insertText=function(n){var r=e.selection;if(r&&d.Range.isCollapsed(r)){var o=ee(e,1);if("-"===n&&"-"===o)return d.Editor.deleteBackward(e),t("—");if(">"===n&&"-"===o)return d.Editor.deleteBackward(e),t("→");if("-"===n&&"<"===o)return d.Editor.deleteBackward(e),t("←");if('"'===n&&o.match(/\S/))return t("”");if("'"===n&&o.match(/\S/))return t("’");if("'"===n)return t("‘");if('"'===n&&!o.match(/\S/))return t("“");var i=ee(e,2);if("."===n&&".."===i)return d.Editor.deleteBackward(e),d.Editor.deleteBackward(e),t("…")}t(n)},e},ne={title:H.qq.Title,oli:H.qq.OLI,uli:H.qq.ULI,bq:H.qq.BQ},re=function(e){return p.createElement("p",null,e.children)},oe=function(e){var t=e.editor,n=o()(e,["editor"]),r=p.useRef(null),i=d.Node.first(t,[0])[0]===n.element.children[0],s=ne[n.element.type]||b.NJ.P,a=function(e,t){switch(t){case"title":return 10;case"oli":case"uli":case"bq-line":return e?U.HM:U.Mk;default:return e?U.HM:U.Zf}}(i,n.element.type),l=(0,g.Iq)(),c=(0,m.vt)()&&0===d.Node.string(n.element).length;if("bq"===n.element.type){var u=l((0,A.l)({paragraphStyle:b.NJ.BQ,topSpacing:0,paragraphLayout:b.ms.FULL_WIDTH,richTextStyle:"CARD",isEmbedded:!1}));return p.createElement("blockquote",{className:u},n.children)}return p.createElement("div",null,c&&p.createElement(_,null),p.createElement(B.zZ,{hasDropCap:!1,name:"",paragraphRef:r,paragraphStyle:s,richTextStyle:"CARD",spaceTop:a},n.children))}},99642:(e,t,n)=>{"use strict";n.d(t,{X:()=>c});var r=n(18156),o=n(67294),i=n(84792),s=n(26600),a=n(54803),l={"mod+b":"bold","mod+i":"italic","mod+k":"link","mod+alt+1":"title","mod+alt+5":"bq"},c=function(e){var t=(0,s.c8)(),n=t.setBackgroundSelection,c=t.setMode;return o.useCallback((function(t){for(var o in l)if((0,r.default)(o,t)){t.preventDefault();var u=(0,a.t$)(e,"title"),p=l[o];switch(p){case"title":return(0,a.th)(e,p);case"link":if(u)return;if((0,a.t$)(e,p))return(0,a.Nx)(e);var d=e.selection,f=(0,a.St)(),m=i.Editor.rangeRef(e,d);if(!f||!n||!c)return;return n(new s.qk(m,f)),c(a.AR.Link);case"bq":if(u)return;return(0,a.th)(e,p);default:if(u)return;return(0,a.w9)(e,p)}}}),[e])}},85094:(e,t,n)=>{"use strict";n.d(t,{T:()=>w});var r=n(63038),o=n.n(r),i=n(56110),s=n(67294),a=n(85432),l=n(64504),c=n(67995),u=n(28309),p=n(74465),d=n(99015);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=s.createElement("path",{d:"M0 6.31l3.7 3.7.9.91.67-1.1 5.3-8.79L8.84 0l-5.3 8.8 1.57-.2-3.7-3.7L0 6.3z"});const v=function(e){return s.createElement("svg",f({width:11,height:11,viewBox:"0 0 11 11"},e),m)};var h=n(13241),g=function(e,t){return function(n){return{fill:e&&t?n.accentColor.text.normal:t?n.baseColor.text.normal:n.baseColor.fill.lighter}}},b=function(e,t){return function(n){var r="1px solid ".concat(n.baseColor.border.lighter);return t&&(r="none"),{border:r,backgroundColor:n.backgroundColor,outline:"none",cursor:"pointer",width:e,":hover":{borderColor:n.baseColor.border.normal},":focus":{borderColor:n.baseColor.border.normal},padding:0}}},E=function(e,t){return function(n){return{color:e&&t?n.accentColor.text.normal:void 0}}},y=function(e,t){return function(n){return{fontSize:"inherit",position:"absolute",background:n.backgroundColor,border:"1px solid ".concat(n.baseColor.border.lighter),borderTop:"0px",borderRadius:t?"4px":void 0,boxShadow:"0 1px 4px ".concat(n.baseColor.border.lighter),left:"0",top:"0",minWidth:"".concat(e,"px"),outline:"none",maxHeight:"310px",overflowY:"auto",zIndex:p.ZP.floating}}},x=function(e,t,n){return function(r){var o=r.accentColor.fill.normal,i=r.backgroundColor;return"SUBTLE"===t&&(o=r.baseColor.background.normal,i=r.baseColor.text.darker),"CHECK"===t&&(o="none",i=r.accentColor.text.normal),{minWidth:n?"max-content":void 0,padding:"8px 10px",margin:"4px 12px",outline:"none",cursor:"pointer",color:e?i:r.baseColor.text.normal,background:e?o:void 0,":hover":{background:o,color:i}}}},R=function(e){return{fill:e.accentColor.text.normal}},P={padding:0,margin:0,width:0,flexGrow:1,border:"none",outline:"none"},S={position:"relative",left:"-4px",opacity:.34},O=function(e){var t=e.tooltipText,n=e.isVisible,r=e.children;return t?s.createElement(a.K,{targetDistance:5,isVisible:n,tooltipText:t,noPortal:!0},r):s.createElement(s.Fragment,null,r)},w=function(e){var t=e.options,n=e.placeholder,r=e.savedOption,p=e.onSelect,f=e.width,m=void 0===f?"100%":f,w=e.activeStyle,I=void 0===w?"OBVIOUS":w,T=e.buttonTextScale,D=void 0===T?"XS":T,C=e.search,k=e.tooltipText,j=e.inactiveLabelComponent,N=e.activeLabelComponent,M=e.optionComponent,_=function(e){return!0===e?function(e,t){return e.label.toLowerCase().includes(t.toLowerCase())}:"function"==typeof e?e:function(){return!0}}(C),L=s.useState(""),A=o()(L,2),B=A[0],U=A[1],H=s.useState([]),F=o()(H,2),V=F[0],Q=F[1],z=s.useRef(null),q=s.useRef(null),$=s.useRef(null),K=s.useState(0),W=o()(K,2),G=W[0],J=W[1],Z=(0,u.Iq)(),Y=s.useState((null==r?void 0:r.index)||0),X=o()(Y,2),ee=X[0],te=X[1],ne=s.useCallback((function(){return r?V.findIndex((function(e){return e.value===r.value})):0}),[r,V]);s.useEffect((function(){Q(t.filter((function(e){return _(e,B)})))}),[B]),s.useEffect((function(){var e=function(e){var t,n;q.current&&q.current.contains(e.target)&&("ArrowDown"===e.key&&(t="number"!=typeof ee||ee===V.length-1?0:ee+1,te(t)),"ArrowUp"===e.key&&(n="number"!=typeof ee||0===ee?V.length-1:ee-1,te(n)),"Enter"===e.key&&(p&&p(V[ee]),U("")))};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}),[ee,V]),s.useEffect((function(){null!=$&&$.current&&J($.current.offsetWidth)}),[$.current]);var re=s.useCallback((function(){te(ne()),setTimeout((function(){z.current&&(z.current.focus(),z.current.select())}))}),[ne]),oe=(0,c.n)({name:"detail",scale:D,color:"DARKER"}),ie=(0,c.n)({name:"detail",scale:"S",color:"LIGHTER"}),se="CHECK"===I;return s.createElement(i.v2,null,(function(e){var t,o=e.isOpen;return t=N&&o?N:j||s.createElement(a.xu,{flexGrow:"1"},r?r.label:n),s.createElement(s.Fragment,null,s.createElement(i.j2,{ref:$,className:Z(b(m,se)),onClick:re},s.createElement(l.F,{scale:D,color:r?"DARKER":"LIGHTER",tag:"div"},s.createElement(O,{isVisible:!o,tooltipText:k},s.createElement(a.xu,{display:"flex",alignItems:"center",justifyContent:se?"flex-start":"space-between",textAlign:"left",padding:"0 12px",height:"34px"},s.createElement("div",{className:Z(E(o,se))},t),s.createElement(a.xu,{flexGrow:"0",marginLeft:se?"8px":"10px"},s.createElement(d.Z,{className:Z([g(o,se)])})))))),s.createElement(i.qy,{ref:q,className:Z(y(G,se))},C&&s.createElement(a.xu,{display:"flex",margin:"4px 12px",padding:"8px 10px",alignItems:"flex-end"},s.createElement(h.Z,{width:"18",height:"18",className:Z(S)}),s.createElement("input",{ref:z,placeholder:"Search...",onChange:function(){var e,t;U(null!==(e=null==z||null===(t=z.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"")},className:Z([oe,P])})),V.map((function(e,t){var n=t===ee;return s.createElement(i.sN,{className:Z(x(n,I,se)),onSelect:function(){p&&p(V[ee]),U("")},key:e.value,onMouseEnter:function(){return te(t)}},s.createElement(a.xu,{display:"flex"},n&&se&&s.createElement(a.xu,{marginRight:"14px"},s.createElement("div",{className:Z([R])},s.createElement(v,null))),s.createElement(a.xu,{marginLeft:!n&&se?"25px":void 0},s.createElement("h4",{className:Z([ie,{color:"inherit"}])},M?s.createElement(M,{option:e}):e.label))))}))))}))}},51176:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=n(67294).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},24745:(e,t,n)=>{"use strict";n.d(t,{E:()=>ge});var r=n(63038),o=n.n(r),i=n(67294),s=n(24548),a=n(28309),l=function(e){var t=e.title,n=e.backgroundColor,r=(0,a.Iq)();return i.createElement("div",{className:r((function(){return{color:"white",backgroundColor:n,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px",marginTop:"2px"}}))},t)},c=n(85740),u=n(34675),p=n(98281),d=n(41832),f=n(85432),m=n(64504),v=n(27572),h=n(67297),g=n(93394),b=n(27952),E=n(59713),y=n.n(E),x=n(46829),R=n(12291),P=n(28774),S=n(2074),O=n(32262),w=n(18970),I=n(27599),T=n(85277);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t,n,r=e.response,s=e.parentPost,a=e.hidePopoverMenu,l=(0,u.Hk)().value,c=(0,I.Av)(),p=(0,v.pK)(),d=(0,R.I0)(),m=i.useState(!1),h=o()(m,2),g=h[0],b=h[1],E=function(){return b(!1)},y=null==r||null===(t=r.creator)||void 0===t?void 0:t.id,D=(0,x.useMutation)(P.O,{variables:{targetUserId:y,userId:null==l?void 0:l.id},update:function(e){var t={postId:s.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:S.g,variables:t}),r=j(n,y);null!==r&&e.writeQuery({query:S.g,data:r,variables:t})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:y,viewerEdge:{id:"userId:".concat(y,":viewerId:optimistic"),isBlocking:!0}}},onCompleted:function(){E(),d((0,T.Dx)({message:"Responses by this user have been hidden from this story."}))}}),C=o()(D,1)[0],k=null===(n=s.creator)||void 0===n?void 0:n.id,N=(null==l?void 0:l.id)===k;return(null==l?void 0:l.id)===y?null:l&&y&&N?i.createElement(i.Fragment,null,i.createElement(O.Sl,null,i.createElement(f.rU,{onClick:function(){b(!0)}},"Block this author")),g&&i.createElement(w.r,{onConfirm:function(){c.event("user.blocked",{userId:y,source:p}),C()},isVisible:g,isInResponsesSidebar:!0,hide:function(){E(),a()}})):null},j=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!t||null==r||!r.responsesConnection||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,i=o.filter((function(e){var n,r;return(null===(n=e.itemType.post)||void 0===n||null===(r=n.creator)||void 0===r?void 0:r.id)!==t}));if(i.length===o.length)return null;var s=o.length-i.length;return C(C({},e),{},{post:C(C({},e.post),{},{postResponses:C(C({},r),{},{count:r.count-s,responsesConnection:C(C({},r.responsesConnection),{},{stream:i})})})})},N=n(28655),M=n.n(N),_=n(71439),L=n(14267),A=n(43522),B=n(54260);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e,t){var n,r,o,i,s=e;return s&&null!==(n=s.threadedPostResponses)&&void 0!==n&&null!==(r=n.posts)&&void 0!==r&&r.some((function(e){return e.id===t}))?H(H({},s),{},{postResponses:{count:((null===(o=s.postResponses)||void 0===o?void 0:o.count)||1)-1},threadedPostResponses:H(H({},s.threadedPostResponses),{},{posts:((null===(i=s.threadedPostResponses)||void 0===i?void 0:i.posts)||[]).filter((function(e){return e.id!==t}))})}):null},V=function(e){var t=e.isDialogOpen,n=e.dialogHeading,r=e.dialogDescription,o=e.cancelDialogAction,s=e.confirmDialogAction,a=e.confirmDialogButtonText,l=e.confirmButtonStyle,c=void 0===l?"STRONG":l,u=e.hide,p=void 0===u?function(){}:u,d=i.useContext(L.D).sidebarRef,v=function(e){var t;null!=d&&null!==(t=d.current)&&void 0!==t&&t.style&&(d.current.style.overflowY=e?"hidden":"")};return i.useEffect((function(){return v(t),function(){v(!1)}}),[t]),i.createElement(f.Vq,{isVisible:t,hide:p,withCloseButton:!1,noPortal:!0,padding:50},i.createElement(f.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},i.createElement(m.X6,{scale:"M"},n),i.createElement(f.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},i.createElement(m.F,{scale:"M",color:"DARKER"},r)),i.createElement(f.xu,{display:"flex",marginBottom:"20px"},i.createElement(f.rU,{onClick:o},i.createElement(m.F,{scale:"M",color:"DARKER"},"Cancel")),i.createElement(f.xu,{marginLeft:"25px"},i.createElement(f.zx,{buttonStyle:c,onClick:s,"data-test-id":"close-discussion-button"},a)))))},Q=n(14391),z=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,r=e.confirmDialogAction,o=e.responseDistribution,s=e.hide,a=o===Q.Et.DISTRIBUTED,l=a?"Delete response and story":"Delete",c=a?"This response is also a story on your profile. Are you sure you want to delete this response?":i.createElement("div",null,"Deleted responses are gone forever.",i.createElement("br",null),"Are you sure?");return i.createElement(V,{isDialogOpen:t,dialogHeading:l,dialogDescription:c,cancelDialogAction:n,confirmDialogAction:r,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:s})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(){var e=M()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return K=function(){return e},e}var W=(0,_.Ps)(K()),G=function(e){var t,n,r=e.response,s=e.hidePopoverMenu,a=i.useState(!1),l=o()(a,2),c=l[0],p=l[1],d=(0,I.Av)(),m=(0,v.pK)(),h=(0,R.I0)(),g=(0,u.Hk)().value,b=i.useContext(B.H).inResponseToPostId,E=i.useContext(L.D),y=E.responseSortType,P=E.sidebarRef,S=(0,x.useMutation)(W,{variables:{responseId:r.id},update:function(e){var t,n=e.readFragment({id:"Post:".concat(b),fragment:A.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:y}});null!==(t=F(n,r.id))&&(e.writeFragment({id:"Post:".concat(b),fragment:A.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:$({},t),variables:{sortType:y}}),d.event("responses.removed",{postId:r.id,source:m}),h((0,T.Dx)({message:"Successfully deleted response."})),s())}}),w=o()(S,1)[0];return null!=g&&g.id&&(null==g?void 0:g.id)===(null===(t=r.creator)||void 0===t?void 0:t.id)?(null!=P&&P.current&&(n=P.current.scrollTop),i.createElement(i.Fragment,null,i.createElement(O.Sl,null,i.createElement(f.rU,{onClick:function(){return p(!0)}},"Delete")),c&&i.createElement(z,{isDialogOpen:c,cancelDialogAction:function(){p(!1),null!=P&&P.current&&(P.current.scrollTop=n)},confirmDialogAction:w,responseDistribution:r.responseDistribution,hide:function(){return p(!1)}}))):null},J=n(51176),Z=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,r=e.confirmDialogAction;return i.createElement(V,{isDialogOpen:t,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:n,confirmDialogAction:r,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},Y=function(e){var t,n,r=e.response,s=(0,u.Hk)().value,a=i.useState(!1),l=o()(a,2),c=l[0],p=l[1],d=i.useContext(J.Q),m=d.setIsEditing,v=d.isEditing,h=d.setEditingQuote,g=(null===(t=r.creator)||void 0===t?void 0:t.id)===(null==s?void 0:s.id),b=i.useContext(L.D).sidebarRef;if(null!=b&&b.current&&(n=b.current.scrollTop),!g)return null;var E=r.responseDistribution===Q.Et.DISTRIBUTED;return i.createElement(i.Fragment,null,i.createElement(O.Sl,null,i.createElement(f.rU,{onClick:function(){E?p(!0):(r.inResponseToMediaResource&&h(r.inResponseToMediaResource.mediumQuote),m(!v))}},"Edit this response")),c&&i.createElement(Z,{isDialogOpen:c,cancelDialogAction:function(){p(!1),null!=b&&b.current&&(b.current.scrollTop=n)},confirmDialogAction:function(){p(!1),null!=b&&b.current&&(b.current.scrollTop=n),r.inResponseToMediaResource&&h(r.inResponseToMediaResource.mediumQuote),m(!v)}}))};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(){var e=M()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return te=function(){return e},e}var ne=(0,_.Ps)(te()),re=function(e){var t,n,r,s=e.responseToBeHidden,a=e.parentPost,l=e.hidePopoverMenu,c=(0,u.Hk)().value,p=(0,R.I0)(),d=(0,I.Av)(),m=(0,v.pK)(),h=i.useContext(B.H).inResponseToPostId,g=i.useContext(L.D).responseSortType,b=h,E=(null==c?void 0:c.id)===(null===(t=a.creator)||void 0===t?void 0:t.id),y=null==a||null===(n=a.collection)||void 0===n?void 0:n.viewerEdge.isEditor,P=(null==c?void 0:c.id)===(null===(r=s.creator)||void 0===r?void 0:r.id),S=(0,x.useMutation)(ne,{variables:{postResponseId:s.id,parentPostId:b},update:function(e){var t,n=e.readFragment({id:"Post:".concat(h),fragment:A.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:g}});null!==(t=F(n,s.id))&&(e.writeFragment({id:"Post:".concat(h),fragment:A.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:ee({},t),variables:{sortType:g}}),d.event("response.hidden",{postId:s.id,source:m}),p((0,T.Dx)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:s.id,parentPostId:b}})),l())}}),w=o()(S,1)[0];return P?null:E||y?i.createElement(O.Sl,null,i.createElement(f.rU,{onClick:function(){return w()}},"Hide this response")):null},oe=n(33241),ie=n(62181),se=n(90639),ae=function(e){var t,n=e.response,r=e.parentPost,s=e.hidePopoverMenu,a=(0,u.Hk)().value,l=(0,I.Av)(),c=(0,v.pK)(),p=i.useState(!1),d=o()(p,2),m=d[0],h=d[1],g=function(e){var t,n,r=e.response,s=r.id,a=null===(t=r.creator)||void 0===t?void 0:t.id,l=null===(n=r.creator)||void 0===n?void 0:n.viewerEdge.isBlocking,c=(0,R.I0)(),u=(0,x.useMutation)(oe.g,{variables:{targetPostId:s,targetAuthorId:a,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){c((0,T.Dx)({message:"Successfully reported post."}))}}),p=o()(u,2),d=p[0],f=p[1];return{reportStory:i.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return d({variables:{targetPostId:s,targetAuthorId:a,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:a,viewerEdge:{id:"userId:".concat(a,"-viewerId:optimistic"),isBlocking:l||n}}}})}),[r,d]),error:null==f?void 0:f.error,loading:null==f?void 0:f.loading}}({response:n}).reportStory,b=(null==a?void 0:a.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);return!n.creator||b?null:i.createElement(i.Fragment,null,i.createElement(O.Sl,null,null!=a&&a.id?i.createElement(f.rU,{onClick:function(){return h(!0)}},"Report this response"):i.createElement(ie.R9,{operation:"register",post:r,susiEntry:"respond_sidebar"},"Report this response")),i.createElement(se.$,{onSubmit:function(e,t){return l.event("response.flagged",{postId:n.id,reason:t,source:c}),g({alsoBlockAuthor:e,reportReason:t})},isVisible:m,hide:function(){h(!1),s()},isResponse:!0}))},le=n(965),ce=n(65347),ue=n(55573),pe=function(e){var t=e.response,n=e.hidePopoverMenu,r=(0,le.CP)(),o=(0,I.Av)(),s=(0,u.Hk)().value,a=(0,v.pK)(),l=(0,h.b$)((function(e){return e.multiVote.clapsPerPost})),c=(0,R.I0)(),p=i.useCallback((function(e){return c((0,ce.at)(e))}),[c]),d=(0,ue.l)(l,t),m=d.clapCount,g=d.viewerClapCount;return null!=s&&s.id&&0!==m&&0!==g?i.createElement(O.Sl,null,i.createElement(f.rU,{onClick:function(){r(t,(null==s?void 0:s.id)||"",-g),p({postId:t.id,clapCount:m-g,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),o.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:g,source:a}),n()}},"Undo applause for this response")):null},de=n(26912),fe=n(6688),me={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},ve=function(e){var t=e.response,n=e.responseType,r=e.parentPost,o=e.isPopoverMenuVisible,s=e.hidePopoverMenu,a=(0,fe.I)(),l=t.creator,c=i.useRef(null);return i.useEffect((function(){var e=function(e){var t;null!=c&&null!==(t=c.current)&&void 0!==t&&t.contains(e.target)||s()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),t&&l?i.createElement("div",{className:a(me),ref:c},i.createElement(O.mX,null,i.createElement(ae,{response:t,parentPost:r,hidePopoverMenu:s}),i.createElement(re,{responseToBeHidden:t,parentPost:r,hidePopoverMenu:s}),i.createElement(k,{response:t,parentPost:r,hidePopoverMenu:s}),n===de.Q.SIMPLE&&i.createElement(pe,{response:t,hidePopoverMenu:s}),n===de.Q.SIMPLE&&i.createElement(Y,{response:t}),i.createElement(G,{response:t,hidePopoverMenu:s}))):null},he=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},ge=function(e){var t,n=e.response,r=e.responseType,E=e.parentPost,y=(0,u.Hk)().value,x=(0,a.Iq)(),R=(0,a.Fg)(),P=n.creator,S=n.mediumUrl,O=n.createdAt,w=i.useState(!1),I=o()(w,2),T=I[0],D=I[1],C=(0,h.v9)((function(e){return e.config.authDomain}));if(!n||!P||!S)return null;var k=(null===(t=E.creator)||void 0===t?void 0:t.id)===P.id,j=(null==y?void 0:y.id)===P.id,N=function(e,t){return e&&t===de.Q.SIMPLE}(n,r)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt),M=i.createElement(f.rU,{href:(0,b.AWr)(P,C)},i.createElement(m.F,{scale:"M",color:"DARKER"},P.name));return i.createElement(i.Fragment,null,i.createElement(f.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between"},i.createElement(f.xu,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(p.Yt,{scale:"XS",user:P}),i.createElement(f.xu,{paddingLeft:"12px"},i.createElement(f.xu,{display:"flex",flexDirection:"row"},i.createElement(c.bZ,{name:"enable_author_cards_byline",placeholder:function(){return M}},(function(e){return e?i.createElement(f.$W,{placement:"top",targetDistance:15,mouseLeaveDelay:200,popoverRenderFn:function(){return i.createElement(d.K$,{user:P})}},i.createElement(f.rU,{href:(0,b.AWr)(P,C)},i.createElement(m.F,{scale:"M",color:"DARKER"},P.name))):M})),k?i.createElement(l,{title:"AUTHOR",backgroundColor:R.brandColor.sage.dark}):j?i.createElement(l,{title:"YOU",backgroundColor:"#A8A8A8"}):null),i.createElement(f.rU,{href:S,linkStyle:"SUBTLE",inline:!0,noFollow:!0},i.createElement(m.F,{scale:"M"},i.createElement(s.b,{timestamp:O}),N&&i.createElement(i.Fragment,null," (edited)"))))),i.createElement(f.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),D(!T)},inline:!0,className:x(he)},i.createElement(g.Z,null))),T&&i.createElement("div",{className:x({position:"relative"})},i.createElement(v.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},i.createElement(ve,{response:n,responseType:r,parentPost:E,isPopoverMenuVisible:T,hidePopoverMenu:function(){return D(!1)}}))))}},13787:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var r=n(28655),o=n.n(r),i=n(71439),s=n(98281);function a(){var e=o()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      viewerEdge {\n        id\n        isBlocking\n      }\n    }\n    mediumUrl\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),s.WQ)},73185:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var r=n(67294),o=n(85432),i=n(28309),s={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},a=function(){var e=(0,i.om)({shimmerKeyframesName:s}).shimmerKeyframesName,t=(0,i.Iq)();return r.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},r.createElement(o.xu,{display:"flex",flexDirection:"row"},r.createElement(o.xu,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{marginLeft:"8px",marginTop:"4px"},r.createElement(o.xu,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),r.createElement(o.xu,{marginTop:"12px"},r.createElement(o.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))}},51151:(e,t,n)=>{"use strict";n.d(t,{J:()=>g,u:()=>b});var r=n(28655),o=n.n(r),i=n(59713),s=n.n(i),a=n(71439),l=n(67294),c=n(19692),u=n(28309),p=n(14391),d=n(58357),f=n(83024);function m(){var e=o()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.inResponseToMediaResource,n=(0,u.Iq)(),r=(0,u.Fg)(),o=(0,d.r)((function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var r=n.split("--")[0];if(r){var o=document.getElementById(r);if(o){var i=(null==o?void 0:o.offsetTop)-100;i&&window.scrollTo({top:i,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),i=null==t?void 0:t.mediumQuote;if(!i)return null;var s=(0,f.eu)(i);if(!s||!s.type)return null;var a=s.type;return a===p.NJ.IMG||a===p.NJ.IFRAME||a===p.NJ.COVER_TITLE||a===p.NJ.HR||a===p.NJ.MIXTAPE_EMBED||a===p.NJ.SECTION_CAPTION?null:l.createElement("div",{onClick:o,onKeyDown:o,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},l.createElement(c.Do,{paragraph:h(h({},s),{},{name:"embedded-quote-".concat(i.quoteId,"-").concat(s.name)}),paragraphStyle:a,spaceTop:4,richTextStyle:"STREAM"}))},b=(0,a.Ps)(m(),f.Sz,c.Rg)},2074:(e,t,n)=>{"use strict";n.d(t,{A:()=>y,g:()=>E});var r=n(28655),o=n.n(r),i=n(71439),s=n(8011),a=n(43522),l=n(41832),c=n(15699),u=n(27952),p=n(13787),d=n(51151);function f(){var e=o()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        viewerEdge {\n          id\n          isBlocking\n        }\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      responseDistribution\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}var m=(0,i.Ps)(f(),p.F,c.h,d.u,u.$mN,l.OJ),v=n(58992),h=n(31078);function g(){var e=o()(["\n  query PagedThreadedPostResponsesQuery(\n    $postId: ID!\n    $postResponsesPaging: PagingOptions\n    $sortType: ResponseSortType\n  ) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      responsesCount\n      postResponses {\n        count\n      }\n      responseRootPost {\n        post {\n          id\n        }\n        responseDepth\n      }\n      threadedPostResponses(paging: $postResponsesPaging, sortType: $sortType) {\n        __typename\n        autoExpandedPostIds\n        pagingInfo {\n          next {\n            limit\n            to\n          }\n        }\n        posts {\n          ... on Post {\n            ...StoryResponse_threadedStoryResponse_post\n            ...SimpleResponse_threadedSimpleResponse_post\n            ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function b(){var e=o()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return b=function(){return e},e}var E=(0,i.Ps)(b(),h.Z,m,s.y),y=(0,i.Ps)(g(),h.Z,a.D,v.t,a.K)},72558:(e,t,n)=>{"use strict";n.d(t,{OT:()=>M,sG:()=>j});var r=n(63038),o=n.n(r),i=n(67294),s=n(2277),a=n(24745),l=n(51151),c=n(14267),u=n(39382),p=n(59713),d=n.n(p),f=n(99046),m=n(54260),v=n(27519),h=n(53976),g=n(85432),b=n(64504),E=n(27599),y=n(27572),x=n(28309);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=i.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const S=function(e){return i.createElement("svg",R({width:29,height:29},e),P)};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.response,n=t.postResponses,r=t.id,o=(null==n?void 0:n.count)||0,s=i.useContext(m.H),a=s.inResponseToPostId,l=s.isThreadedResponsesVisible,u=s.toggleThreadedResponses,p=s.threadDepthOnPage,d=s.toggleCreateReply,R=s.loadThreadedResponses,P=s.isThreadedResponsesQueryCalled,O=s.showContinueThisThreadSidebar,I=s.threadDepthFromRootPost,T=i.useContext(c.D).rootPostId,D=(0,E.Av)(),C=(0,y.pK)(),k=(0,x.Iq)(),j=function(e){return function(t){return{fill:e?t.accentColor.fill.normal:t.baseColor.fill.normal,height:"25px",width:"25px"}}},N=!!(0,h.V)({name:"enable_lite_continue_this_thread",placeholder:!1}),M=p>=v.y,_=M&&o>0,L=function(e,t){return i.createElement(g.xu,{display:"flex",alignItems:"center"},i.createElement(S,{className:k(j(_)),"aria-label":"responses"}),i.createElement(g.xu,{tag:"div",marginLeft:"8px",marginTop:"2px"},i.createElement(b.F,{color:e,tag:"p",scale:"M"},t)))},A={postId:r,parentPostId:a,rootPostId:T,threadDepth:I,source:C},B=t.mediumUrl?i.createElement(g.rU,{linkStyle:"SUBTLE",href:t.mediumUrl},L("ACCENT","Continue this thread")):null,U=function(){O(),D.event("response.continue",w({},A))},H=N?i.createElement(g.rU,{linkStyle:"SUBTLE",onClick:U},L("ACCENT","Continue this thread")):B;return i.createElement(g.xu,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},i.createElement(g.xu,{display:"flex",alignItems:"center"},i.createElement(f.S,{buttonStyle:"SUBTLE_THREADED_RESPONSE",post:t,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),i.createElement(g.xu,{marginLeft:"12px",display:"flex",alignItems:"center",height:"25px"},_?H:o>0&&i.createElement(g.rU,{linkStyle:"SUBTLE",onClick:function(){!function(e){e?D.event("response.collapsed",w({},A)):e||D.event("response.expanded",w({},A))}(l),u()}},L("DARKER",function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")}(o,l))))),!_&&i.createElement(g.xu,{paddingRight:"6px"},i.createElement(b.F,{color:"DARKER",scale:"M"},i.createElement(g.rU,{onClick:function(){M?U():(P||R(),d())},inline:!0},"Reply"))))},T=n(26912),D=n(72955),C=n(15699),k=n(29035),j=function(e){return e.join("").length>320?"char":e.join("\n").split("\n").length>u._W?"line":"none"},N=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},M=function(e){var t,n=e.simpleResponse,r=e.parentPost,p=e.omitBottomBorder,d=n.creator,f=n.content,m=n.mediumUrl,v=i.useState(!1),h=o()(v,2),E=h[0],y=h[1],R=i.useRef(null),P=(0,x.Iq)(),S=i.useContext(c.D).sidebarRef;(0,D.Vj)(R,n,S);var O=null==f||null===(t=f.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(d&&f&&O&&m))return null;var w=O.map((function(e){return e.text||""})),M=j(w),_="none"!==M,L=_&&!E,A=(0,k.ic)(navigator&&navigator.userAgent);return i.createElement(C.o,{post:n,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!_},i.createElement(g.xu,{paddingTop:"25px",paddingBottom:A&&p?"48px":"16px",borderBottom:p?void 0:"BASE_LIGHTER",ref:R},i.createElement(a.E,{response:n,responseType:T.Q.SIMPLE,parentPost:r}),i.createElement(l.J,{inResponseToMediaResource:n.inResponseToMediaResource}),i.createElement(g.xu,{marginTop:"5px"},i.createElement(s.c.Provider,{value:!0},i.createElement(u.YN,{paragraphs:O,truncateStrategy:M,isExpanded:E}))),L&&i.createElement("button",{onClick:function(){return y(!0)},className:P(N)},i.createElement(b.F,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),i.createElement(I,{response:n})))}},39382:(e,t,n)=>{"use strict";n.d(t,{_W:()=>m,YN:()=>h});var r=n(59713),o=n.n(r),i=n(67294),s=n(3011),a=n(85432),l=n(64504),c=n(28309),u=n(14391),p=n(50993);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=5;function v(e,t,n){return"char"===e&&t>250||"line"===e&&n>m}function h(e){var t=e.paragraphs,n=e.truncateStrategy,r=e.isExpanded,o=(0,c.Iq)(),d=0,m=0,h="none"!==n&&!r;return i.createElement("pre",{className:o({whiteSpace:"pre-wrap"})},t.map((function(e){if(!r&&v(n,d,m))return null;var t=(null==e?void 0:e.text)||"";d+=t.length||0,m+=t.split("\n").length||0;var c=f(f({},e),{},{dropCapImage:null,hasDropCap:null}),g=!r&&v(n,d,m);if(g&&"char"===n){var b=250-(d-t.length||0);c.markups=c.markups.reduce((function(e,t){if(t.start<b){var n=f({},t);n.end>b&&(n.end=b),e.push(n)}return e}),[]),c.text=(0,p.N8)(t,b)}return i.createElement(a.xu,{padding:"5px 0px",key:e.name||e.id},i.createElement(l.F,{scale:"M",color:"DARKER",tag:"div"},i.createElement("div",{className:o({lineHeight:"24px"})},i.createElement(s.T2,{paragraph:c,richTextStyle:"FULL_PAGE",paragraphStyle:u.NJ.P}),h&&g&&"...")))})).filter((function(e){return!!e})))}},8011:(e,t,n)=>{"use strict";n.d(t,{y:()=>d});var r=n(28655),o=n.n(r),i=n(71439),s=n(5399),a=n(51151),l=n(41832),c=n(72955),u=n(27952);function p(){var e=o()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        viewerEdge {\n          isBlocking\n        }\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      viewerEdge {\n        id\n        clapCount\n      }\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      responseDistribution\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,i.Ps)(p(),c.h_,c.kH,a.u,s.I,u.$mN,l.OJ)},43522:(e,t,n)=>{"use strict";n.d(t,{D:()=>m,K:()=>v});var r=n(28655),o=n.n(r),i=n(71439),s=n(5399),a=n(51151),l=n(58992),c=n(41832),u=n(72955),p=n(27952);function d(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse_defaultPostResponses on Post {\n    responsesCount\n    postResponses {\n      count\n    }\n    threadedPostResponses(paging: {limit: 10}, sortType: $sortType) {\n      __typename\n      autoExpandedPostIds\n      pagingInfo {\n        next {\n          limit\n          to\n        }\n      }\n      posts {\n        ... on Post {\n          ...StoryResponse_threadedStoryResponse_post\n          ...SimpleResponse_threadedSimpleResponse_post\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse_post on Post {\n    id\n    createdAt\n    firstPublishedAt\n    latestPublishedAt\n    title\n    creator {\n      id\n      name\n      username\n      imageId\n      mediumMemberAt\n      viewerEdge {\n        id\n        isBlocking\n      }\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n    viewerEdge {\n      id\n      clapCount\n    }\n    isPublished\n    voterCount\n    responsesCount\n    postResponses {\n      count\n    }\n    allowResponses\n    latestRev\n    recommenders {\n      id\n      name\n    }\n    mediumUrl\n    content {\n      bodyModel {\n        paragraphs {\n          text\n        }\n        ...getSlateBodyFromPostBodyModel_bodyModel\n      }\n    }\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    inResponseToType\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}var m=(0,i.Ps)(f(),u.h_,u.kH,a.u,s.I,p.$mN,c.OJ),v=(0,i.Ps)(d(),l.t,m)},58992:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var r=n(28655),o=n.n(r),i=n(71439),s=n(41832),a=n(15699),l=n(27952),c=n(13787),u=n(51151);function p(){var e=o()(["\n  fragment StoryResponse_threadedStoryResponse_post on Post {\n    id\n    responsesCount\n    postResponses {\n      count\n    }\n    creator {\n      viewerEdge {\n        id\n        isBlocking\n      }\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n\n    previewContent {\n      bodyModel {\n        paragraphs {\n          text\n          type\n        }\n      }\n    }\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...ResponseHeader_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,i.Ps)(p(),c.F,a.h,u.u,l.$mN,s.OJ)},6615:(e,t,n)=>{"use strict";n.d(t,{Fz:()=>U,Fe:()=>J,Jz:()=>G});var r=n(63038),o=n.n(r),i=n(319),s=n.n(i),a=n(59713),l=n.n(a),c=n(46829),u=n(23450),p=n.n(u),d=n(67294),f=n(26600),m=n(78067),v=n(54803),h=n(86156),g=n(51176),b=n(14267),E=n(72558),y=n(19537),x=n(59070),R=n(27572),P=function(e){var t,n=e.responsePost,r=e.index,i=e.parentPost,a=e.omitBottomBorder,l=d.useState(!1),c=o()(l,2),u=c[0],p=c[1],f=d.useState(null),m=o()(f,2),v=m[0],h=m[1],P=d.useContext(b.D),S=P.editingResponsesAtIndices,O=P.setEditingResponsesAtIndices;return d.useEffect((function(){if(u&&!S.includes(r)&&O([].concat(s()(S),[r])),!u&&S.includes(r)){var e=S.filter((function(e){return e!==r}));O(e)}}),[u,S,O]),n?u?d.createElement(g.Q.Provider,{value:{isEditing:u,setIsEditing:p,latestRev:null==n?void 0:n.latestRev,createdAt:null==n?void 0:n.createdAt,setEditingQuote:h,editingQuote:v}},d.createElement(R.cW,{source:{index:r},key:n.id,extendSource:!0},d.createElement(x.O,{type:y.H.edit,parentPostId:i.id,responseId:n.id,initialValue:null==n||null===(t=n.content)||void 0===t?void 0:t.bodyModel}))):d.createElement(g.Q.Provider,{value:{isEditing:u,setIsEditing:p,setEditingQuote:h,editingQuote:v}},d.createElement(R.cW,{source:{index:r},key:n.id,extendSource:!0},d.createElement(E.OT,{parentPost:i,simpleResponse:n,omitBottomBorder:a}))):null},S=n(73185),O=n(2074),w=n(85432),I=n(64504),T=n(28309),D=n(15699),C=n(14391),k=n(81162),j=n(14349),N=n(27390),M=n(27952),_=n(24745),L=n(51151),A=n(26912);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U,H=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},F=function(e){var t,n,r=e.storyResponse,o=e.parentPost,i=e.omitBottomBorder,s=(0,T.Iq)(),a=(0,T.Fg)(),l=r.creator,c=r.previewContent,u=r.mediumUrl,p=r.clapCount,f=r.responsesCount,m=null==c||null===(t=c.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(l&&c&&c.bodyModel&&u&&m))return null;var v=function(e){var t,n=[],r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.text&&(n.push(o),n.length>=2))break}}catch(e){r.e(e)}finally{r.f()}return{title:n[0],subtitle:n[1]}}(m);if(!v.title&&!v.subtitle)return null;var h,g=null!==(null===(n=r.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),b=f||0;return d.createElement(D.o,{post:r,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},d.createElement(w.xu,{paddingTop:"25px",paddingBottom:"20px",borderBottom:i?void 0:"BASE_LIGHTER"},d.createElement(_.E,{response:r,responseType:A.Q.STORY,parentPost:o}),d.createElement(L.J,{inResponseToMediaResource:r.inResponseToMediaResource}),d.createElement(w.P3,{href:(0,M.jVf)(r)},d.createElement("div",{className:s({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:g?"12px":"16px",backgroundColor:a.backgroundColor})},d.createElement("div",{className:s(H)},d.createElement(I.F,{scale:"S",color:"LIGHTER",tag:"div"},d.createElement(w.xu,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:p>0||b>0?"20px":"0"},p>0?d.createElement(w.xu,{display:"flex",alignItems:"center"},d.createElement(w.xu,{tag:k.Z,marginRight:"2px"}),d.createElement("div",null,(0,N.pY)(p))):null,b>0?d.createElement(w.xu,{display:"flex",alignItems:"center"},d.createElement(w.xu,{tag:j.Z,marginLeft:p?"8px":"0",marginRight:"2px"}),d.createElement("div",null,(0,N.pY)(b))):null))),d.createElement(I.F,{scale:"M",clamp:2,color:"DARKER"},v.title&&d.createElement(w.xu,null,v.title.text),v.subtitle&&d.createElement("div",{className:s((h=v.title.type,function(e){return{color:h===C.NJ.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},v.subtitle.text))))))},V=n(54260),Q=n(9471),z=n(22091),q=n(27599);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(U||(U={}));var W=function(e,t){return{marginBottom:t?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(e.baseColor.border.lighter)}},G=function(e,t){var n,r,o,i,a,l,c=null==t||null===(n=t.post)||void 0===n?void 0:n.threadedPostResponses,u=null==t?void 0:t.post,p=null==t||null===(r=t.post)||void 0===r?void 0:r.threadedPostResponses;if(!(u&&c&&c.posts&&p))return e;var d=(null==e||null===(o=e.post)||void 0===o||null===(i=o.threadedPostResponses)||void 0===i?void 0:i.posts)||[],f=(null==t||null===(a=t.post)||void 0===a||null===(l=a.threadedPostResponses)||void 0===l?void 0:l.posts)||[];return{post:K(K({},u),{},{threadedPostResponses:K(K({},p),{},{posts:[].concat(s()(d),s()(f))})})}},J=function(e){var t=e.replies,n=e.parentPost,r=e.inResponseToPostId,o=e.threadDepthFromRootPost,i=e.threadDepthOnPage,a=void 0===i?1:i,l=e.displayBottomBorder,c=void 0!==l&&l,u=e.isShowAutoExpandedResponse,p=void 0!==u&&u,f=e.autoExpandedResponseIds,v=void 0===f?[]:f,h=(0,q.Av)(),g=(0,R.pK)(),E=d.useContext(b.D),y=E.rootPostId,x=E.isResponsesSidebarVisible,P=E.showCreateReplyEditor,S=s()((null==t?void 0:t.posts)||[]);return p&&(S=S.filter((function(e){return v.some((function(t){return t===e.id}))}))),d.useEffect((function(){p&&x&&S.forEach((function(e){h.event("response.autoExpanded",{postId:e.id,parentPostId:r,rootPostId:y,threadDepth:o,context:m.r.INLINE_POST_RESPONSE,source:g})}))}),[]),S&&0!==S.length?d.createElement(z.xu,null,S.map((function(e,t,i){if(!e)return null;var s=t!==i.length-1||c;return d.createElement(Z,{reply:e,parentPost:n,bottomBorder:s,index:t,inResponseToPostId:r,key:e.id,threadDepthFromRootPost:o,threadDepthOnPage:a,showCreateReplyEditor:P&&0===t})}))):null},Z=function(e){var t,n,r,i,a,l,u=e.reply,g=e.parentPost,E=e.bottomBorder,y=e.index,x=e.inResponseToPostId,w=e.threadDepthOnPage,D=void 0===w?1:w,C=e.threadDepthFromRootPost,k=e.showCreateReplyEditor,j=void 0!==k&&k,N=(0,T.Iq)(),M=(0,T.Fg)(),_=(0,R.pK)(),L=(0,q.Av)(),A=null!==(t=u.threadedPostResponses)&&void 0!==t&&t.autoExpandedPostIds?s()(u.threadedPostResponses.autoExpandedPostIds):[],B=d.useState(Boolean(A.length)),U=o()(B,2),H=U[0],$=U[1],K=d.useContext(b.D),Z=K.responsesLocked,Y=K.isLockedResponse,X=K.inResponseToQuote,ee=K.setInResponseToQuote,te=K.setIsSavingResponse,ne=K.sidebarRef,re=K.responseDistribution,oe=K.setResponseDistribution,ie=K.responseSortType,se=K.rootPostId,ae=K.isResponsesSidebarVisible,le=d.useContext(h.f).addContinueThisThreadSidebar,ce=d.useState([]),ue=o()(ce,2),pe=ue[0],de=ue[1],fe=d.useRef(null),me=null===(n=u.creator)||void 0===n?void 0:n.name;me&&(l="Replying to ".concat(me));var ve=(0,c.useLazyQuery)(O.A,{variables:{postId:u.id,postResponsesPaging:{limit:10},sortType:ie},ssr:!1}),he=o()(ve,2),ge=he[0],be=he[1],Ee=be.called,ye=be.data,xe=be.loading,Re=be.fetchMore;d.useEffect((function(){var e;null!=fe&&null!==(e=fe.current)&&void 0!==e&&e.getBoundingClientRect&&fe.current.getBoundingClientRect().bottom>window.innerHeight&&fe.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var Pe=null==ye||null===(r=ye.post)||void 0===r?void 0:r.threadedPostResponses;H&&!Ee&&ge();var Se,Oe=(null==Pe?void 0:Pe.posts)||[],we=(null===(i=u.postResponses)||void 0===i?void 0:i.count)||0,Ie=function(e,t,n,r){var o=t.length,i=n.length;return o&&e?r-o:i?r-i:0}(H,A,Oe,we),Te=Ie>0,De=null==Pe||null===(a=Pe.pagingInfo)||void 0===a?void 0:a.next;return De&&(Se=function(){Re&&Re({variables:{postId:u.id,postResponsesPaging:{limit:De.limit,to:De.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return G(e,n)}})}),d.createElement(z.Bn,{initialVisibility:H},(function(e){var t=e.isVisible,n=e.toggle,r=e.show;return d.createElement(z.Bn,{initialVisibility:j},(function(e){var o,i=e.isVisible,s=e.hide,a=e.toggle;return d.createElement(z.xu,{borderBottom:E?"BASE_LIGHTER":"NONE",marginLeft:"24px",marginRight:D>1?"0":"24px"},d.createElement(V.H.Provider,{value:{inResponseToPostId:x,isThreadedResponsesVisible:t,toggleThreadedResponses:function(){Ee||ge(),$(!1),n()},showThreadedResponses:function(){Ee||(ge(),L.event("response.expanded",{postId:u.id,parentPostId:x,rootPostId:se,threadDepth:C,context:m.r.INLINE_POST_RESPONSE,source:_})),$(!1),r()},threadDepthFromRootPost:C,threadDepthOnPage:D,hideCreateReply:s,toggleCreateReply:a,loadThreadedResponses:ge,isThreadedResponsesQueryCalled:Ee,isThreadedResponsesQueryLoading:xe,showContinueThisThreadSidebar:function(){le(u)}}},d.createElement("div",{ref:0===y?fe:void 0},(0,v.qW)(u)?d.createElement(P,{responsePost:u,index:y,parentPost:g,omitBottomBorder:!0}):d.createElement(R.cW,{source:{index:y},key:u.id,extendSource:!0},d.createElement(F,{storyResponse:u,parentPost:g,omitBottomBorder:!0}))),i&&d.createElement("div",{className:N(W(M,t))},d.createElement(R.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},d.createElement(f.zg,null,d.createElement(Q.Z,{parentPostId:u.id,hideReplyEditing:s,placeholder:l,showEditorHeader:!1}))))),t&&d.createElement("div",{className:N(W(M,Te))},xe&&d.createElement(z.xu,{marginLeft:"24px"},d.createElement(S.j,null)),(null==Pe?void 0:Pe.posts)&&(null==Pe||null===(o=Pe.posts)||void 0===o?void 0:o.length)>0&&d.createElement(b.D.Provider,{value:{setIsSavingResponse:te,responsesLocked:Z,isLockedResponse:Y,editingResponsesAtIndices:pe,setEditingResponsesAtIndices:de,inResponseToQuote:X,setInResponseToQuote:ee,sidebarRef:ne,responseDistribution:re,setResponseDistribution:oe,responseSortType:ie,rootPostId:se,isResponsesSidebarVisible:ae}},d.createElement(J,{replies:Pe,parentPost:g,inResponseToPostId:u.id,threadDepthOnPage:D+1,threadDepthFromRootPost:C+1,isShowAutoExpandedResponse:H,autoExpandedResponseIds:A}))),Te&&(t||H)&&d.createElement(z.xu,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},d.createElement(I.F,{color:"ACCENT",scale:"M"},d.createElement(z.rU,{linkStyle:"OBVIOUS",onClick:function(){H?($(!1),r()):Se()}},function(e,t){return e?"Show ".concat(t," more ").concat(p()("reply",t)):"Load more replies (".concat(t,")")}(H,Ie)))))}))}))}},54260:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r=n(67294).createContext({inResponseToPostId:"",isThreadedResponsesVisible:!1,toggleThreadedResponses:function(){},showThreadedResponses:function(){},threadDepthFromRootPost:0,threadDepthOnPage:0,hideCreateReply:function(){},toggleCreateReply:function(){},loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1,showContinueThisThreadSidebar:function(){}})},9471:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var r=n(87757),o=n.n(r),i=n(48926),s=n.n(i),a=n(67294),l=n(12291),c=n(59116),u=n(78067),p=n(14267),d=n(54260),f=n(30049),m=n(319),v=n.n(m),h=n(59713),g=n.n(h),b=n(28655),E=n.n(b),y=n(71439),x=n(80439),R=n(43522),P=n(58992);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(){var e=E()(["\n  mutation publishPostThreadedResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n    $responseDistribution: ResponseDistributionType\n    $sortType: ResponseSortType\n  ) {\n    publishPostThreadedResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n      responseDistribution: $responseDistribution\n    ) {\n      id\n      ... on Post {\n        ...StoryResponse_threadedStoryResponse_post\n        ...SimpleResponse_threadedSimpleResponse_post\n        ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}var I=(0,y.Ps)(w(),R.D,P.t,R.K),T=function(e){var t=e.children,n=e.parentPostId,r=a.useContext(p.D).responseSortType;return a.createElement(x.mm,{mutation:I,update:function(e,t){var o=function(e,t){if(!t||!e.data)return null;var n=e.data.publishPostThreadedResponse;return O(O({},t),{},{postResponses:{count:t.postResponses.count+1},threadedPostResponses:O(O({},t.threadedPostResponses),{},{posts:[n].concat(v()(t.threadedPostResponses.posts))})})}(t,e.readFragment({id:"Post:".concat(n),fragment:R.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:r}}));null!==o&&e.writeFragment({id:"Post:".concat(n),fragment:R.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",variables:{sortType:r},data:O({},o)})}},(function(e,n){return t({publishResponse:e,loading:n.loading,error:n.error})}))};function D(){var e=E()(["\n  mutation savePostResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n  ) {\n    savePostResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n    ) {\n      ... on Post {\n        id\n      }\n    }\n  }\n"]);return D=function(){return e},e}var C=(0,y.Ps)(D()),k=function(e){var t=e.children;return a.createElement(x.mm,{mutation:C},(function(e){return t({saveResponse:e})}))},j=n(19537),N=n(64435),M=n(64504),_=n(27599),L=n(27572),A=n(28309),B=n(14391),U=n(85277),H=function(e){var t=e.parentPostId,n=e.placeholder,r=e.hideReplyEditing,i=void 0===r?function(){}:r,m=e.editorOpenByDefault,v=void 0===m||m,h=e.showEditorHeader,g=void 0===h||h,b=a.useContext(p.D),E=b.setIsSavingResponse,y=b.responsesLocked,x=b.inResponseToQuote,R=b.setInResponseToQuote,P=b.responseDistribution,S=b.setResponseDistribution,O=b.responseSortType,w=b.rootPostId,I=a.useContext(d.H),D=I.showThreadedResponses,C=I.isThreadedResponsesQueryLoading,H=I.threadDepthFromRootPost,F=function(){P===B.Et.DISTRIBUTED?S(B.Et.NOT_DISTRIBUTED):S(B.Et.DISTRIBUTED)},V=(0,L.pK)(),Q=(0,_.Av)(),z=(0,l.I0)(),q=(0,A.Iq)(),$=a.useRef(null);a.useEffect((function(){var e;null!=$&&null!==(e=$.current)&&void 0!==e&&e.getBoundingClientRect&&$.current.getBoundingClientRect().bottom>window.innerHeight&&$.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var K=function(e){return function(){var n=s()(o().mark((function n(r,i){var s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({variables:{inResponseToPostId:t,deltas:r,inResponseToQuoteId:null==x?void 0:x.id}});case 2:s=n.sent,i(s.data.savePostResponse.id);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};return a.createElement(T,{parentPostId:t},(function(e){var r=e.publishResponse,l=e.loading,p=e.error;return(0,c._M)(p)||y?(E(!1),a.createElement(f.R,{message:N.x})):a.createElement(k,null,(function(e){var p,d=e.saveResponse;return a.createElement("div",{ref:$},a.createElement(M.F,{scale:"M",color:"DARKER",tag:"div"},a.createElement("div",{className:q({lineHeight:"24px"})},a.createElement(N.j,{postId:t,isPublishingResponse:l,publishResponse:(p=r,function(e,n){return E(!0),p({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:null==x?void 0:x.id,responseDistribution:P,responseSortType:O}}).then((function(e){var r=e.data&&e.data.publishPostThreadedResponse,o=(0,c.ed)(e.errors);if(r)return Q.event("inlineEditor.publish",{postId:t,context:u.r.INLINE_POST_RESPONSE,source:V}),Q.event("response.created",{postId:r.id,parentPostId:t,rootPostId:w,threadDepth:H+1,context:u.r.INLINE_POST_RESPONSE,source:V}),r.responseDistribution===B.Et.DISTRIBUTED&&Q.event("response.distributed",{postId:r.id,parentPostId:t,rootPostId:w,threadDepth:H+1,context:u.r.INLINE_POST_RESPONSE,source:V}),E(!1),D(),P===B.Et.DISTRIBUTED&&(z((0,U.Dx)({message:"",toastStyle:"PUBLISH_RESPONSE",extraParams:{response:r},duration:5e3})),S(B.Et.NOT_DISTRIBUTED)),n();o&&(E(!1),z((0,U.Dx)({message:"You’ve reached the limit for stories that can be published in one day. Please try again tomorrow.",toastStyle:"ERROR"})))}))}),saveResponse:K(d),type:j.H.create,inResponseToQuote:x,onClose:s()(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(void 0),i(),e.abrupt("return",{});case 3:case"end":return e.stop()}}),e)}))),editorOpenByDefault:v,placeholder:n,showEditorHeader:g,disableReplyButton:C,showPublishCheckbox:!v,responseDistribution:P,toggleResponseDistribution:F}))))}))}))}},30049:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(67294),o=n(85432),i=n(64504),s=n(27952),a=function(e){var t=e.message||"The author has closed discussion for this story.";return r.createElement(o.xu,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},r.createElement(i.F,{scale:"M",tag:"span",color:"DARKER"},t," ",r.createElement(o.rU,{href:(0,s.VGH)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},19537:(e,t,n)=>{"use strict";var r;n.d(t,{H:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},64435:(e,t,n)=>{"use strict";n.d(t,{x:()=>Ee,j:()=>Oe});var r=n(63038),o=n.n(r),i=n(87757),s=n.n(i),a=n(48926),l=n.n(a),c=n(59713),u=n.n(c),p=n(18446),d=n.n(p),f=n(67294),m=n(84792),v=n(10143),h=n(26600),g=n(25772),b=n(78067),E=n(22470),y=n(54803),x=n(9735),R=n(99642),P=n(24548),S=n(42963),O=n(54260),w=n(32262),I=n(85432),T=n(28309),D=n(74465),C=n(93394),k=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}},j=function(e){var t=e.isEdit,n=e.saveResponse,r=e.setDraftResponseId,o=(0,T.Iq)(),i="editorPopoverMenu";return f.createElement(I.Bn,null,(function(e){var s=e.isVisible,a=e.toggle,l=e.hide;return f.createElement(I.J2,{ariaId:i,isVisible:s,hide:l,customZIndex:D.ZP.responseSidebarPopover,noArrow:!0,placement:"bottom-end",popoverRenderFn:function(){return f.createElement(w.mX,null,f.createElement(w.Sl,null,f.createElement(I.rU,{onClick:t&&r?r:n,"data-testid":"saveResponseMenuItem"},"Make this response a story")))}},f.createElement(I.rU,{ariaControls:i,ariaExpanded:s?"true":"false",onClick:a,className:o(k),"data-testid":"editorMenu"},f.createElement(C.Z,null)))}))},N=n(19692),M=n(14391),_=n(83024),L=function(e){var t=e.quote,n=(0,T.Iq)();if(!t)return null;var r=(0,_.eu)(t);return r?f.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},f.createElement(N.Do,{paragraph:r,paragraphStyle:M.NJ.P,spaceTop:4,richTextStyle:"STREAM"})):null},A=function(e){var t=e.onFocus,n=e.responseContent,r=e.setResponseContent,o=e.setIsEmpty,i=e.isEditorOpen,s=(0,T.Iq)();return f.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;o(!t),r(t)},onFocus:t,className:s({width:"100%",padding:"14px",resize:"none",minHeight:i?"100px":"0",height:i?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},B=n(22091),U=n(33914),H=n(64504),F=n(67122),V=n(13779);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=f.createElement("path",{d:"M5.82 6.22L4.04 11.2h3.63l-1.85-5zm-.28-1.9h1.19l4.31 11.27 1.08.22v.74H8.03v-.74l1.12-.08.13-.26-1.3-3.44H3.74l-1.29 3.44.19.26 1.17.08v.74H.28v-.74l1.04-.22L5.54 4.33zM17.95 14.9v-3.17c-1.5.41-2.5.8-2.97 1.14-.47.34-.7.8-.7 1.36 0 .45.12.81.38 1.08.27.27.62.4 1.06.4.28 0 .6-.07.96-.2.37-.14.8-.34 1.27-.61zm0 .6c-.58.4-1.11.7-1.6.9-.48.18-.93.27-1.35.27-.7 0-1.26-.2-1.68-.63a2.28 2.28 0 0 1-.63-1.67c0-.77.32-1.37.94-1.8.64-.45 2.07-.94 4.32-1.48v-.57c0-.75-.12-1.28-.37-1.57-.25-.3-.67-.44-1.28-.44-.23 0-.46.02-.68.07-.22.05-.45.12-.7.21v1.51H13.7c-.22 0-.37-.04-.45-.11-.08-.08-.12-.23-.12-.44 0-.59.34-1.07 1.01-1.46a5.27 5.27 0 0 1 2.63-.58c.95 0 1.63.2 2.06.61.43.41.64 1.07.64 1.98v5.22l.3.3.96.08v.65h-2.53l-.24-1.04z",fill:"#000"});const q=function(e){return f.createElement("svg",Q({width:21,height:21,viewBox:"0 0 21 21",fill:"none"},e),z)};var $=n(63671),K=n(25343),W=function(e,t,n){var r=t&&!e;return{margin:"0 4px",cursor:e?"default":"pointer",opacity:e?"0.5":"1",padding:"6px",borderRadius:"4px",display:"inline-flex",justifyContent:"center",backgroundColor:r?F.aE:null,":hover":{backgroundColor:e?null:t?F.aE:n.baseColor.background.normal},"> svg > path":{fill:r?F.r$:F.wU},"> span > svg > path":{fill:r?F.r$:F.wU}}},G=function(e){var t=e.editor,n=e.buttonKeys,r=e.showSubMenu,o=e.disabled,i=e.setShowSubMenu,s=(0,T.Iq)();return t&&n&&n.length>0?f.createElement(B.J2,{disablePortalOverlay:!0,isVisible:r&&!o,noPortal:!0,hide:function(){},placement:"top",targetDistance:15,popoverRenderFn:function(){return f.createElement(H.F,{tag:"span",scale:"M"},f.createElement("span",{className:s({display:"flex",padding:"8px"})},n.map((function(e){return f.createElement(J,{key:e,format:e,disabled:o,slateEditor:t,showSubMenu:r,setShowSubMenu:i})}))))},customZIndex:D.ZP.selectionMenu,referenceHeight:"100%",refTag:"span",shouldAnimateOpen:!0},f.createElement(q,null)):null},J=function(e){var t=e.format,n=e.disabled,r=e.slateEditor,o=e.subMenuKeys,i=void 0===o?[]:o,s=e.showSubMenu,a=e.setShowSubMenu,l=(0,T.Iq)(),c=(0,T.Fg)(),u=(0,h.c8)(),p=u.setBackgroundSelection,d=u.setMode,v=t===ee?s:(0,y.t$)(r,t);if(!p||!d)return null;var g=r.selection,b=function(e){switch(e){case Z:return"Bold (⌘B)";case Y:return"Italic (⌘I)";case X:return"Link (⌘K)";case ee:return"Formatting options";default:return"Click to format"}}(t);return f.createElement(U._,{tooltipText:b,targetDistance:10,isVisible:!(t===ee&&s)},f.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:function(e){if(e.stopPropagation(),!n)switch(t){case X:if(v)return(0,y.Nx)(r);var o=(0,y.St)();if(!o||!g)return null;var i=m.Editor.rangeRef(r,g);return p(new h.qk(i,o)),d(y.AR.Link);case"title":case"bq":return(0,y.th)(r,t);case ee:return void a(!s);default:return(0,y.w9)(r,t)}},className:l(W(n,v,c))},function(e,t,n,r,o,i){switch(e){case Z:return f.createElement(V.Z,null);case Y:return f.createElement($.Z,null);case X:return f.createElement(K.Z,null);case ee:return f.createElement(G,{editor:n,buttonKeys:r,showSubMenu:t,disabled:o,setShowSubMenu:i})}}(t,v,r,i,n,a)))},Z="bold",Y="italic",X="link",ee="format",te=function(e){var t=e.editor,n=e.disabled,r=e.showSubMenu,o=e.setShowSubMenu;return 3===e.editorDepth?f.createElement(H.F,{tag:"span",scale:"M"},f.createElement(J,{key:ee,format:ee,disabled:n,slateEditor:t,subMenuKeys:[Z,Y],showSubMenu:r,setShowSubMenu:o})):f.createElement(H.F,{tag:"span",scale:"M"},f.createElement(I.xu,{display:"flex"},f.createElement(J,{key:Z,format:Z,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o}),f.createElement(J,{key:Y,format:Y,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o})))},ne=n(19537),re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[],o=e.split("\n");return n&&(r=[{type:8,index:0,section:{name:oe(),startIndex:0}}]),o.forEach((function(e,t){r.push({type:1,paragraph:{markups:[],name:oe(),text:e,type:1},verifySameName:!1,index:t})})),r},oe=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},ie=n(53976),se=n(34675),ae=n(62181),le=n(98281),ce=n(42933),ue=n(36544),pe=function(e){var t=e.isVisible,n=e.hide,r=(0,se.Hk)().value;return f.createElement(ue.C,null,(function(e){var o=e.mutate;return f.createElement(I.QH,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){o()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==r?void 0:r.unverifiedEmail,".")}))},de=n(27599),fe=n(27572),me=n(67297),ve=n(27952),he=n(29035);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee="The author has closed discussion for this story. We are unable to save changes to your response.",ye=function(){return{"& button":{border:"none"}}},xe="400ms",Re="300ms",Pe=function(e,t){var n=be(be({},t),{},{display:"flex"});return be(be({},n),{},e?{transition:"opacity ".concat(xe,", max-height ").concat(xe),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(xe,", max-height ").concat(xe),opacity:0,maxHeight:0})},Se=function(e){return e?{transition:"min-height ".concat(xe),minHeight:"100px"}:{transition:"min-height ".concat(xe),minHeight:"15px"}},Oe=function(e){var t,n=e.postId,r=e.responseId,i=e.createdAt,a=e.isPublishingResponse,c=e.disableReplyButton,u=void 0!==c&&c,p=e.publishResponse,w=e.saveResponse,D=void 0===w?function(){return Promise.resolve()}:w,C=e.type,k=void 0===C?ne.H.create:C,N=e.onClose,_=void 0===N?l()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):N,B=e.inResponseToQuote,U=e.initialValue,F=e.placeholder,V=void 0===F?"What are your thoughts?":F,Q=e.editorOpenByDefault,z=void 0!==Q&&Q,q=e.showEditorHeader,$=void 0===q||q,K=e.showPublishCheckbox,W=void 0!==K&&K,G=e.responseDistribution,J=void 0===G?M.Et.NOT_DISTRIBUTED:G,Z=e.toggleResponseDistribution,Y=void 0===Z?function(){}:Z,X=k===ne.H.edit,ee=(0,T.Iq)(),oe=(0,de.Av)(),ue=(0,fe.pK)(),ge=(0,T.Fg)(),Ee=!!(0,ie.V)({name:"enable_lite_response_markup",placeholder:!1}),Oe=(0,he.rO)(navigator.userAgent),we=k===ne.H.edit,Ie=(0,h.c8)().value,Te=(0,x.Vz)([x.Fm]),De=Te.editor,Ce=Te.renderLeaf,ke=Te.renderElement,je=(0,R.X)(De),Ne=null===De.selection,Me=f.useState(!1),_e=o()(Me,2),Le=_e[0],Ae=_e[1],Be=f.useContext(O.H).threadDepthOnPage+ +!X,Ue=f.useState(X||z),He=o()(Ue,2),Fe=He[0],Ve=He[1],Qe=f.useState(!0),ze=o()(Qe,2),qe=ze[0],$e=ze[1],Ke=f.useState(null),We=o()(Ke,2),Ge=We[0],Je=We[1],Ze=f.useState(!1),Ye=o()(Ze,2),Xe=Ye[0],et=Ye[1],tt=f.useState((t=U)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),nt=o()(tt,2),rt=nt[0],ot=nt[1],it=f.useRef(m.Node.string(De)),st=f.useState(void 0),at=o()(st,2),lt=at[0],ct=at[1],ut=f.useState(!1),pt=o()(ut,2),dt=pt[0],ft=pt[1],mt=f.useCallback((function(){return ft(!1)}),[]),vt=(0,me.v9)((function(e){return e.config.authDomain})),ht=(0,se.Hk)().value,gt=f.useCallback((function(){_().then((function(e){e.preventStateUpdate||(Ve(!1),Oe?ot(""):(0,y.oe)(De))}))}),[Ve]),bt=f.useCallback((function(){return Oe?re(rt,X?{includeInitialDeltas:!1}:void 0):(0,y.wB)(De,X?{includeInitialDeltas:!1}:void 0)}),[rt,X]);if(f.useEffect((function(){B&&Ve(!0)}),[B]),f.useEffect((function(){var e=m.Node.string(De);$e(e.trim().length<=0);var t=bt();et(!d()(Ge,t)),e!==it.current&&Ae(!1),it.current=e}),[Ie]),f.useEffect((function(){var e=bt();Je(e)}),[U]),f.useEffect((function(){Fe&&!Oe&&(z||we||v.F3.blur(De),setTimeout((function(){return v.F3.focus(De)}),0))}),[Fe]),lt)return oe.event("inlineEditor.expand",{postId:n,context:b.r.INLINE_POST_RESPONSE,source:ue}),f.createElement(S.l,{to:(0,ve.d0A)(vt,lt)});var Et,yt,xt,Rt=f.createElement("div",{className:ee(Pe(Fe,{padding:"0 14px",alignSelf:"flex-end"}))},(Ee||!W)&&f.createElement("div",{className:ee(ye)},f.createElement(I.zx,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return gt()}},"Cancel")),f.createElement(I.zx,{buttonStyle:"STRONG",size:"SMALL",disabled:qe||a||!Xe||u,onClick:function(){var e=Oe?re(rt,X?{includeInitialDeltas:!1}:void 0):(0,y.wB)(De,X?{includeInitialDeltas:!1}:void 0);null!=ht&&ht.unverifiedEmail?ft(!0):p(e,gt)}},X?"Update":"Respond")),Pt=f.createElement(te,{editor:De,disabled:Ne,showSubMenu:Le,setShowSubMenu:Ae,editorDepth:Be}),St=f.createElement(I.XZ,{onChange:Y,checked:J===M.Et.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px"},"Also publish to my profile");return f.createElement(ce.x,{marginBottom:z?"0":"20px",padding:X?"0":"0 24px",paddingTop:z?"0":"20px"},f.createElement("div",{className:ee({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:Fe?"14px":"0",paddingBottom:Fe?"14px":"0",transition:"padding-top ".concat(xe,", padding-bottom ").concat(xe)})},ht&&$&&f.createElement("div",{className:ee((yt=Fe,xt={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},be(be({},xt),{},yt?{transition:"opacity ".concat(xe,", max-height ").concat(xe,", margin-bottom ").concat(xe),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(Re,", max-height ").concat(Re,", margin-bottom ").concat(Re),opacity:0,maxHeight:0,marginBottom:"0"})))},f.createElement(ce.x,{display:"flex",alignItems:"center"},f.createElement(le.Yt,{scale:"XS",user:ht}),f.createElement(ce.x,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},f.createElement(H.F,{scale:"M",color:"DARKER"},ht.name),X&&i&&f.createElement(H.F,{scale:"M",color:"LIGHTER"},f.createElement(P.b,{timestamp:i})))),Fe&&!W&&f.createElement(ce.x,{display:"flex",justifyContent:"flex-end"},f.createElement(j,{isEdit:X,setDraftResponseId:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return ct(r)})),saveResponse:function(){var e=Oe?re(rt):(0,y.wB)(De);return D(e,ct)}}))),Fe&&f.createElement(L,{quote:B}),f.createElement(ce.x,{display:"flex",flexDirection:"column"},ht?f.createElement("div",{className:ee(Se(Fe))},Oe?f.createElement(A,{onFocus:function(){return Ve(!0)},responseContent:rt,setIsEmpty:$e,setResponseContent:ot,isEditorOpen:Fe}):f.createElement(ce.x,{padding:"14px"},f.createElement(E.c,{editor:De},f.createElement(g.O,{onFocus:function(){return Ve(!0)},onBlur:function(){return Ae(!1)},onClick:function(){return Ae(!1)},renderLeaf:Ce,renderElement:ke,placeholder:V,onKeyDown:function(e){Ee&&je(e)}})))):f.createElement(ae.R9,{operation:"register",susiEntry:"respond_sidebar"},f.createElement(ce.x,{padding:"14px"},f.createElement(H.F,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),(Et=Ee?Pt:W?St:null)?f.createElement("div",{className:ee(Pe(Fe,{justifyContent:"space-between",marginLeft:"4px",color:ge.baseColor.text.lighter}))},Et,Rt):Rt)),f.createElement(pe,{isVisible:dt,hide:mt}),Ee&&W&&f.createElement("div",{className:ee(Pe(Fe,{marginTop:"14px"}))},St))}},59070:(e,t,n)=>{"use strict";n.d(t,{O:()=>v});var r=n(59713),o=n.n(r),i=n(67294),s=n(68356),a=n.n(s),l=n(19537),c=n(52383),u=n(90320);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={delay:1e3,timeout:2e4,loading:function(e){return e.error?i.createElement(c.C,{error:e.error}):e.timedOut?i.createElement(c.C,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?i.createElement(u.a,null):null}},m=a()(d(d({},f),{},{loader:function(){return n.e(6635).then(n.bind(n,91229))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[91229]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return i.createElement(n,t)}})),v=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?l.H.create:r,s=e.initialValue;return i.createElement(m,{parentPostId:t,responseId:n,type:o,initialValue:s})}},31078:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>I,Z:()=>D});var r=n(59713),o=n.n(r),i=n(63038),s=n.n(i),a=n(28655),l=n.n(a),c=n(71439),u=n(46829),p=n(67294),d=n(32262),f=n(85432),m=n(64504),v=n(27599),h=n(27572),g=n(28309);function b(){var e=l()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function E(){var e=l()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return E=function(){return e},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(){var e=l()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return R=function(){return e},e}function P(){var e=l()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return P=function(){return e},e}var S=function(){return{fontStyle:"italic",textAlign:"center"}},O=(0,c.Ps)(P()),w=(0,c.Ps)(R()),I=function(e){var t,n=e.parentPostId,r=e.responsesLocked,o=e.hidePopoverMenu,i=(0,g.Iq)(),a=(0,v.Av)(),l=(0,h.pK)(),c=p.useState(!1),b=s()(c,2),E=b[0],y=b[1],x=(0,u.useMutation)(O,{variables:{postId:n},update:function(e){a.event("responses.locked",{postId:n,source:l}),T(e,n,!0,o)}}),R=s()(x,1)[0],P=(0,u.useMutation)(w,{variables:{postId:n},update:function(e){T(e,n,!1,o)}}),I=s()(P,1)[0];return t=!0===r?p.createElement(f.rU,{onClick:function(){return I()}},"Open discussion"):p.createElement(f.rU,{onClick:function(){return y(!0)}},"Close discussion"),p.createElement(p.Fragment,null,p.createElement(d.Sl,null,t),E&&p.createElement(f.Vq,{isVisible:E,hide:function(){return y(!1)},withCloseButton:!1,noPortal:!0,padding:50},p.createElement(f.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},p.createElement(m.X6,{scale:"M"},"Close Discussion"),p.createElement(f.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},p.createElement(m.F,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),p.createElement(f.xu,{display:"flex",marginBottom:"20px"},p.createElement(f.rU,{onClick:function(){return y(!1)}},p.createElement(m.F,{scale:"M",color:"DARKER"},"Cancel")),p.createElement(f.xu,{marginLeft:"25px"},p.createElement(f.zx,{buttonStyle:"ERROR",onClick:function(){return R()},"data-test-id":"close-discussion-button"},"Close discussion"))),p.createElement("div",{className:i(S)},p.createElement(m.F,{scale:"M"},"You can reopen the discussion at any time.")))))},T=function(e,t,n,r){var o=e.readQuery({query:C,variables:{postId:t}});o&&(e.writeQuery({query:C,data:Object.assign({},o,{post:x(x({},o.post),{},{responsesLocked:n})}),variables:{postId:t}}),r())},D=(0,c.Ps)(E()),C=(0,c.Ps)(b(),D)},26912:(e,t,n)=>{"use strict";var r;n.d(t,{Q:()=>r}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(r||(r={}))},27519:(e,t,n)=>{"use strict";n.d(t,{y:()=>ue,k:()=>pe});var r=n(319),o=n.n(r),i=n(63038),s=n.n(i),a=n(38125),l=n.n(a),c=n(67294),u=n(86156),p=n(59713),d=n.n(p),f=n(46829),m=n(2074),v=n(6615),h=n(85094),g=n(85432),b=n(33914),E=n(28309);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.99 5.04c.26-.21.64-.22.91-.01.97.72 1.77 1.21 2.6 1.54.83.32 1.72.48 2.89.5.41.01.74.35.74.76-.02 3.62-.43 6.26-1.45 8.21-1.03 1.98-2.66 3.21-4.97 4.08a.75.75 0 0 1-.53 0c-2.25-.87-3.86-2.1-4.9-4.07-1.02-1.95-1.46-4.59-1.48-8.22 0-.41.33-.75.75-.76 1.19-.02 2.1-.18 2.92-.5.82-.32 1.6-.81 2.52-1.53zm.46.9c-.9.69-1.71 1.21-2.62 1.56a8.9 8.9 0 0 1-3.02.57c.03 3.45.46 5.82 1.36 7.51.88 1.69 2.25 2.77 4.28 3.57 2.1-.8 3.47-1.89 4.34-3.57.89-1.7 1.3-4.07 1.34-7.51a8.8 8.8 0 0 1-3-.57 11.8 11.8 0 0 1-2.68-1.56zm0 9.15a2.67 2.67 0 1 0 0-5.34 2.67 2.67 0 0 0 0 5.34zm0 1a3.67 3.67 0 1 0 0-7.34 3.67 3.67 0 0 0 0 7.34zm-1.82-3.77l.53-.53.91.92 1.63-1.63.52.53-2.15 2.15-1.44-1.44z"});const R=function(e){return c.createElement("svg",y({width:25,height:25,viewBox:"0 0 25 25"},e),x)};var P,S=function(){var e=(0,E.Iq)();return c.createElement(b._,{tooltipText:"View community guidelines"},c.createElement(g.rU,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},c.createElement(R,null)))},O=n(73185),w=n(14267);!function(e){e.RESPONSES_SIDEBAR="web-inline-responses-sidebar"}(P||(P={}));var I=n(59070),T=n(34675),D=n(27572),C=n(6688),k=n(93394),j=n(32262),N=n(67297),M=n(27952),_=n(31078),L={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},A=function(e){var t=e.parentPostId,n=e.responsesLocked,r=e.isPopoverMenuVisible,o=e.hidePopoverMenu,i=(0,C.I)(),s=(0,N.v9)((function(e){return e.config.authDomain})),a=c.useRef(null);return c.useEffect((function(){var e=function(e){var t;null!=a&&null!==(t=a.current)&&void 0!==t&&t.contains(e.target)||o()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),c.createElement("div",{className:i(L),ref:a},c.createElement(j.mX,null,c.createElement(j.Sl,null,c.createElement(g.rU,{href:(0,M.t$b)(s,t)},"Manage responses")),c.createElement(_.Eq,{parentPostId:t,responsesLocked:n,hidePopoverMenu:o})))},B=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},U=function(e){var t,n,r=e.parentPost,o=e.responsesLocked,i=(0,C.I)(),a=(0,T.Hk)().value,l="managementPopoverMenu",u=c.useState(!1),p=s()(u,2),d=p[0],f=p[1],m=(null==a?void 0:a.id)===(null===(t=r.creator)||void 0===t?void 0:t.id),v=null==r||null===(n=r.collection)||void 0===n?void 0:n.viewerEdge.isEditor;return m||v?c.createElement(g.xu,null,c.createElement(g.rU,{ariaControls:l,ariaExpanded:d?"true":"false",onClick:function(e){e.nativeEvent.stopPropagation(),f(!d)},inline:!0,className:i(B)},c.createElement(k.Z,null)),d&&c.createElement("div",{id:l,className:i({position:"relative"})},c.createElement(D.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},c.createElement(A,{parentPostId:r.id,responsesLocked:o,isPopoverMenuVisible:d,hidePopoverMenu:function(){return f(!1)}})))):null},H=n(3149),F=n(64504),V=n(27599),Q=n(14391),z=n(31235);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var $=c.createElement("path",{d:"M13.4 16.96l-6.48-6.48L13.4 4l.8.71-5.77 5.77 5.77 5.77z",fillRule:"evenodd"});const K=function(e){return c.createElement("svg",q({width:21,height:21},e),$)};var W={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},G={fontSize:"12px",textTransform:"uppercase"},J=function(e){var t,n,r,o,i=e.responses,a=e.parentPost,l=e.responsesLocked,u=e.isLockedResponse,p=e.isLoadingInitialContent,f=e.isFetchingNextSetOfResponses,m=e.isResponsesSidebarVisible,b=e.closeSidebar,y=e.inResponseToQuote,x=e.setInResponseToQuote,R=e.sidebarRef,T=e.responseDistribution,C=e.setResponseDistribution,k=e.responseSortType,j=e.setResponseSortType,N=e.rootPostId,M=e.postDepth,_=e.isContinueThisThread,L=e.showPreviousSidebar,A=e.showCreateReplyEditor,B=void 0!==A&&A,q=(0,E.Iq)(),$=(0,V.Av)(),J=(0,D.pK)(),Z=(0,z.xg)(),Y=c.useState(!1),X=s()(Y,2),ee=X[0],te=X[1],re=c.useState([]),oe=s()(re,2),ie=oe[0],se=oe[1],ae=a.id,le=(null===(t=a.postResponses)||void 0===t?void 0:t.count)||0,ce=_?"Thread":"Responses"+(le>0?" (".concat(le,")"):""),ue=i,pe=null==i||null===(n=i.pagingInfo)||void 0===n?void 0:n.next,de=(null==i?void 0:i.posts)&&le&&i.posts.length<le,fe=Boolean(f&&pe&&de),me=(r={},d()(r,Q.sV.TOP,"Most relevant"),d()(r,Q.sV.REVERSE_CHRON,"Most recent"),r),ve=[{label:me[Q.sV.TOP],value:Q.sV.TOP,index:0},{label:me[Q.sV.REVERSE_CHRON],value:Q.sV.REVERSE_CHRON,index:1}],he=ve.findIndex((function(e){return e.value===k})),ge=c.useState(ve[he]),be=s()(ge,2),Ee=be[0],ye=be[1];return c.createElement(w.D.Provider,{value:{setIsSavingResponse:te,responsesLocked:l,isLockedResponse:u,editingResponsesAtIndices:ie,setEditingResponsesAtIndices:se,inResponseToQuote:y,setInResponseToQuote:x,sidebarRef:R,responseDistribution:T,setResponseDistribution:C,responseSortType:k,rootPostId:N,isResponsesSidebarVisible:m,showCreateReplyEditor:B}},m&&ee&&c.createElement(g.TF,{horizontalOverride:{left:"calc(100vw - ".concat(ne,")")}}),c.createElement(g.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},c.createElement(g.xu,{display:"flex",flexDirection:"row"},_&&c.createElement(g.xu,{paddingRight:"18px"},c.createElement(F.X6,{scale:"S"},c.createElement(g.rU,{onClick:L,"data-testid":"back-button","aria-label":"back"},c.createElement(K,{height:"26px",width:"26px"})))),c.createElement(F.X6,{scale:"S"},ce)),c.createElement(g.xu,{display:"flex",flexDirection:"row"},c.createElement(S,null),c.createElement(U,{parentPost:a,responsesLocked:l}),c.createElement(g.xu,{position:"relative",right:"-7px"},c.createElement(H.P,{onClick:b,size:"REGULAR",isPositionAbsolute:!1})))),p?c.createElement(g.xu,{padding:"0 24px"},c.createElement(O.j,null)):c.createElement(c.Fragment,null,_||Z&&!m?null:c.createElement(c.Fragment,null,c.createElement(I.O,{parentPostId:ae}),i&&c.createElement(g.xu,{borderBottom:"BASE_LIGHTER",padding:"20px 20px 12px 20px",marginBottom:"16px"},c.createElement(h.T,{activeStyle:"CHECK",onSelect:function(e){ye(e),j(e.value),$.event("responses.sort",{postId:ae,context:P.RESPONSES_SIDEBAR,sortType:e.value,source:J})},options:ve,savedOption:Ee,inactiveLabelComponent:Ee&&c.createElement(g.xu,null,c.createElement("strong",{className:q(G)},Ee.label)),width:"max-content"}))),i&&0!==(null==ue||null===(o=ue.posts)||void 0===o?void 0:o.length)?c.createElement(g.xu,null,c.createElement(v.Fe,{replies:i,inResponseToPostId:a.id,parentPost:a,displayBottomBorder:fe,threadDepthFromRootPost:M+1}),fe&&c.createElement(g.xu,{margin:"0 24px"},c.createElement(O.j,null))):c.createElement("div",{className:q(W)},c.createElement(F.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),c.createElement(F.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},Z=n(324),Y=n(80637);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e){var t={top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,pointerEvents:"none"};return e&&(t.transition="opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"),t},ne="414px",re=function(e,t){return function(n){var r=d()({width:ne,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,Y.sm)(n),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"});return e||(r.visibility="hidden"),t||(r.transition="transform 0s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0s cubic-bezier(0.23, 1, 0.32, 1) 0s"),r}},oe=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},ie=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},se=function(e){var t,n,r,o,i,a,l,u,p,d,h=e.isResponsesSidebarVisible,b=e.inResponseToQuote,y=e.setInResponseToQuote,x=e.parentPost,R=e.continueThisThreadPost,P=e.continueThisThreadPostDepth,S=e.showPreviousSidebar,O=e.cleanupSidebar,w=e.initialSidebarRender,I=(0,E.Iq)(),T=(0,z.xg)(),C=c.useState(Q.sV.TOP),k=s()(C,2),j=k[0],N=k[1],M=c.useRef(null),_=(0,f.useLazyQuery)(m.A,{variables:{postId:x.id,postResponsesPaging:{limit:10},sortType:j},ssr:!1}),L=s()(_,2),A=L[0],B=L[1],U=B.called,H=B.loading,F=B.data,V=B.fetchMore;U||R||T&&!h||A();var q=null==F||null===(t=F.post)||void 0===t?void 0:t.responsesLocked,$=null==F||null===(n=F.post)||void 0===n?void 0:n.isLockedResponse,K=null==F||null===(r=F.post)||void 0===r?void 0:r.threadedPostResponses,W=!1;if(R){var G,Y,X,ne=(null===(G=R.threadedPostResponses)||void 0===G?void 0:G.posts)||[];W=ne.length<1,K={posts:[ee(ee({},R),{},{threadedPostResponses:{posts:ne,autoExpandedPostIds:null!==(Y=R.threadedPostResponses)&&void 0!==Y&&Y.posts?null===(X=R.threadedPostResponses)||void 0===X?void 0:X.posts.map((function(e){return e.id})):[],pagingInfo:null,__typename:"ThreadedPostResponseConnection"}})],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"}}!h&&w&&(K={posts:[],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"});var se,le=(null==F||null===(o=F.post)||void 0===o||null===(i=o.responseRootPost)||void 0===i||null===(a=i.post)||void 0===a?void 0:a.id)||"",ce=P||(null==F||null===(l=F.post)||void 0===l||null===(u=l.responseRootPost)||void 0===u?void 0:u.responseDepth)||0,ue=c.useState(0),pe=s()(ue,2),de=pe[0],fe=pe[1],me=c.useState(!1),ve=s()(me,2),he=ve[0],ge=ve[1],be=c.useState(Q.Et.NOT_DISTRIBUTED),Ee=s()(be,2),ye=Ee[0],xe=Ee[1];c.useEffect((function(){de||fe(window.innerWidth)}),[]);var Re=null===(p=K)||void 0===p||null===(d=p.pagingInfo)||void 0===d?void 0:d.next;Re&&!R&&(se=function(){V&&V({variables:{postId:x.id,postResponsesPaging:{limit:Re.limit,to:Re.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return ge(!1),(0,v.Jz)(e,n)}})});var Pe=function(){xe(Q.Et.NOT_DISTRIBUTED),O()};return c.createElement(Z.N8,null,c.createElement(D.cW,{source:{name:"responses",postId:x.id},extendSource:!0},c.createElement(g.xu,{print:{display:"none"}},c.createElement("div",{className:I([te(w),ie(h)]),onClick:Pe,onKeyUp:function(e){13===e.keyCode&&Pe()},"aria-hidden":!h,role:"presentation"}),c.createElement("div",{className:I([re(h,w),oe(h,de)]),"aria-hidden":!h,onScroll:function(e){return ae(e,Re,he,ge,se)},ref:M},c.createElement(J,{responses:K,parentPost:x,responsesLocked:q,isLockedResponse:$,isLoadingInitialContent:H,isFetchingNextSetOfResponses:he,isResponsesSidebarVisible:h,closeSidebar:Pe,showPreviousSidebar:S,inResponseToQuote:b,setInResponseToQuote:y,sidebarRef:M,responseDistribution:ye,setResponseDistribution:xe,responseSortType:j,setResponseSortType:N,rootPostId:le,postDepth:ce,isContinueThisThread:!!R,showCreateReplyEditor:W})))))},ae=function(e,t,n,r,o){e.preventDefault();var i=e.currentTarget;i.scrollHeight-i.scrollTop-i.clientHeight<1.5*i.clientHeight&&t&&!n&&(r(!0),o())},le=n(72955),ce=n(8403),ue=3,pe=function(e){var t=e.children,n=e.post,r=c.useState(!1),i=s()(r,2),a=i[0],p=i[1],d=(0,E.Fg)(),f=!!(0,ce.Wd)("responsesOpen"),m=c.useState(!1),v=s()(m,2),h=v[0],g=v[1],b=c.useRef(!0),y=c.useState(void 0),x=s()(y,2),R=x[0],P=x[1],S=c.useRef(0),O=c.useState(!1),w=s()(O,2),I=w[0],T=w[1],D=c.useState([]),C=s()(D,2),k=C[0],j=C[1],N=function(){j(l()(k))},M=function(){g(!1),j([]),b.current=!0};c.useEffect((function(){T(!0),g(f)}),[f]);var _=function(){window.innerWidth<d.breakpoints.md&&p(!0)};return c.useEffect((function(){return _(),le.V6.on("resize",_),function(){return le.V6.off("resize",_)}}),[]),c.useEffect((function(){var e,t,n=null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.documentElement;return a&&null!=n&&n.style&&(h?(n.style.top="-".concat(S.current,"px"),S.current=n.scrollTop,n.style.overflow="hidden",n.style.position="fixed"):(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=S.current)),function(){a&&null!=n&&n.style&&(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=S.current)}}),[h]),c.createElement(u.f.Provider,{value:{openSidebarToRespondToHighlight:function(e){P(e),g(!0)},addContinueThisThreadSidebar:function(e){b.current=!1,j([].concat(o()(k),[e]))}}},I&&c.createElement(se,{isResponsesSidebarVisible:h&&0===k.length,parentPost:n,inResponseToQuote:R,setInResponseToQuote:P,showPreviousSidebar:N,cleanupSidebar:M,initialSidebarRender:b.current}),I&&k.map((function(e,t,r){var o=(ue-1)*(t+1);return c.createElement(se,{key:n.id,isResponsesSidebarVisible:h&&t===r.length-1,parentPost:n,inResponseToQuote:R,setInResponseToQuote:P,continueThisThreadPost:e,continueThisThreadPostDepth:o,showPreviousSidebar:N,cleanupSidebar:M,initialSidebarRender:b.current})})),t({show:function(){return g(!0)}}))}},79208:(e,t,n)=>{"use strict";n.d(t,{Dm:()=>r,JA:()=>y});var r,o=n(63038),i=n.n(o),s=n(87757),a=n.n(s),l=n(48926),c=n.n(l),u=n(94301),p=n.n(u),d=n(67294),f=n(61250);!function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.UPLOADING=2]="UPLOADING",e[e.UPLOADED=3]="UPLOADED"}(r||(r={}));var m=new Set(["jpg","jpeg","png","gif"]),v=function(e){return new Promise((function(t){return setTimeout(t,e)}))},h=function(){var e=c()(a().mark((function e(t,n){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()(t,{credentials:"same-origin",method:"POST",headers:{accept:"application/json","Content-Type":"application/json","x-xsrf-token":"1","X-Obvious-CID":"web"},body:JSON.stringify({url:n})});case 2:return r=e.sent,e.next=5,r.text();case 5:return o=e.sent,e.abrupt("return",JSON.parse(o.replace("])}while(1);</x>","")));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=c()(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("uploadedFile",n),e.next=4,p()(t,{credentials:"same-origin",method:"POST",headers:{"x-xsrf-token":"1","X-Obvious-CID":"web"},body:r});case 4:return o=e.sent,e.next=7,o.text();case 7:return i=e.sent,e.abrupt("return",JSON.parse(i.replace("])}while(1);</x>","")));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b="CreateUpload",E=new Error("Image upload failed. The URL you provided may be invalid."),y=function(e,t,n){var o=d.useState(r.NONE),s=i()(o,2),l=s[0],u=s[1],p=d.useRef(null),y=d.useCallback((function(){p.current&&p.current.click()}),[p.current]),x=(0,f.BS)(b),R=(0,f.BS)("CreateUploadUrl");function P(){return S.apply(this,arguments)}function S(){return(S=c()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(r.STARTING),e.next=3,v(0);case 3:u(r.UPLOADING);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=c()(a().mark((function n(o){var i,s,l,c,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P();case 2:if(n.prev=2,R){n.next=5;break}throw new Error("Expected ".concat(b," route to exist"));case 5:return n.next=7,h(R.pathPattern,o);case 7:s=n.sent,l=s.success,c=s.payload,l&&null!=c&&null!==(i=c.value)&&void 0!==i&&i.fileId?((p=new Image).onload=function(){u(r.UPLOADED),e(c,{url:o,height:p.height,width:p.width},(function(){return u(r.NONE)}))},p.onerror=function(){t(E)},p.src=o):t(E),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),t(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))).apply(this,arguments)}function w(e){return I.apply(this,arguments)}function I(){return(I=c()(a().mark((function o(i){var s,l,c,p,d,f,v,h;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=null==i?void 0:i[0]){o.next=3;break}return o.abrupt("return");case 3:if(l=s.name.split(".").pop(),m.has((null==l?void 0:l.toLowerCase())||"")){o.next=7;break}return n&&n(),o.abrupt("return");case 7:return o.next=9,P();case 9:if(o.prev=9,x){o.next=12;break}throw new Error("Expected ".concat(b," route to exist"));case 12:return o.next=14,g(x.pathPattern,s);case 14:p=o.sent,d=p.success,f=p.payload,d&&null!=f&&null!==(c=f.value)&&void 0!==c&&c.md5&&(v=URL.createObjectURL(s),(h=new Image).onload=function(){u(r.UPLOADED),e(f,{file:s,height:h.height,width:h.width},(function(){return u(r.NONE)}))},h.src=v),o.next=22;break;case 19:o.prev=19,o.t0=o.catch(9),t(o.t0);case 22:case"end":return o.stop()}}),o,null,[[9,19]])})))).apply(this,arguments)}function T(){w(this.files),this.value=""}return d.useEffect((function(){if(p.current)return p.current.addEventListener("change",T),function(){p.current&&p.current.removeEventListener("change",T)}}),[p.current]),{inputRef:p,fireClick:y,status:l,handleDropEvent:function(e){var t=e.dataTransfer;t&&w(t.files)},uploadUrl:function(e){return O.apply(this,arguments)}}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/4803.15ea4361.chunk.js.map